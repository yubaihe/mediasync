(function(){"use strict";var e={39407:function(e,t,i){var l=i(45130),n=(i(44114),i(18111),i(22489),i(56768)),o=i(24232),r=i(90144),a=i(88636),s=i(89231),u=i(59048),d=i(92820),c=i(65943);const h={class:"TestMain"},v=["src"],f=["onClick"],g={key:0,class:"itemselect",style:{width:"20px",height:"20px",position:"absolute",right:"0","margin-right":"5px"}},p=["src"],y=["src"],m=["src"],k={class:"picinfo",style:{width:"100%",height:"3vh","background-color":"#ffffff",position:"relative"}},w={key:0,class:"videoinfo",style:{width:"65%",height:"100%",position:"relative",display:"flex","align-items":"center"}},b={style:{width:"1.5vh",height:"1.5vh"}},L=["src"],x=["innerHTML"],T=["innerHTML"],O={key:0,class:"finishcontent",style:{width:"100%",height:"4vh"}},C={style:{"vertical-align":"middle","text-align":"center","padding-left":"10px","padding-right":"10px"}},H=["innerHTML"],S={style:{width:"30%",height:"100%",display:"flex","align-items":"center"}},j=["src"],E={style:{width:"40%",height:"100%",display:"flex","align-items":"center"}},M=["src"],_=20;var R={__name:"App",setup(e){const t=(0,r.KR)([]),l=()=>{R.value=!0},R=(0,r.KR)(!1),z=()=>{R.value=!1;for(let e=0;e<t.value.length;++e)t.value[e]["select"]=!1;ae.value.LeaveSelectMode()},K=e=>{1==R.value?e["select"]=!e["select"]:u.f.device.itemdetail(e.id+"")};let A=[],X=0,J=0;const N=()=>{let e={};e["name"]=se,e["piccount"]=J,e["videocount"]=X,u.f.device.backupremoveitems(JSON.stringify(e))},Q=()=>{A=[],X=0,J=0;for(let e=0;e<t.value.length;++e)1==t.value[e]["select"]&&A.push(t.value[e]);0!=A.length&&ShowConfirm((0,d.yk)("确认"),(0,d.yk)("删除后将永远丢失该媒体的存储,请确认!"),1,(0,d.yk)("按钮确定"),function(){SetToast((0,d.yk)("剩余:")+A.length),G()},(0,d.yk)("按钮取消"),function(){})},F=(0,n.EW)(()=>t.value.filter(e=>1==e.needshow)),G=()=>{if(0==A.length)return Toast((0,d.yk)("删除成功")),N(),void z();let e=A.pop(),t={action:"backupuploaditemdel"};t["itemid"]=e.id;let i=e.mtype;u.o.request.backupuploaditemdel(JSON.stringify(t),function(t,l,n){var o=JSON.parse(t);1==o["status"]?(1==i?J++:X++,SetToast((0,d.yk)("剩余:")+A.length),HideItem(e.id),G()):(Toast((0,d.yk)("删除失败")),N())},function(e,t){Toast((0,d.yk)("删除失败")),N()})},I=()=>{let e=0;for(let i=0;i<t.value.length;++i)1==t.value[i].needshow&&e++;return(0,d.yk)("总数量")+"( "+e+" )"},P=e=>(0,s.T5)(e.maddr,se),W=e=>(0,s._D)(e.dur),q=e=>(0,s.yi)(e.msize),B=(0,r.KR)(0),D=e=>{var t=B.value/3;let i=t/e.w*1*e.h;return i+"px"},V=(0,c.A)(()=>{B.value=ae.value.GetWidth()},400);window.addEventListener("resize",V);const Y=(e,t)=>{const i=t.elements().viewport;let l=i.clientHeight,n=i.scrollTop;const o=i.scrollHeight-i.clientHeight;1!=ie.value?o-n<l/3&&0==te.value&&re():Z()},U=(0,r.KR)(!1),Z=()=>{const e=ae.value.GetScrollBar().elements().viewport;return e.clientHeight<e.scrollHeight?(U.value=!0,!0):(U.value=!1,!1)},$=(0,r.KR)(!0),ee=()=>{if(Z(),0==ie.value){const e=ae.value.GetScrollBar().elements().viewport;if(e.clientHeight==e.scrollHeight)return void re()}else 1==ie.value&&($.value=1!=ne())},te=(0,r.KR)(!1),ie=(0,r.KR)(!1),le=()=>{let e=0;for(let i=0;i<t.value.length;++i)1==t.value[i]["needshow"]&&e++;return e},ne=()=>{let e=!0;for(let i=0;i<t.value.length;++i)if(1==t.value[i]["needshow"]){e=!1;break}return 1==e?1==$.value&&($.value=!1,R.value=!1,u.f.device.dataempty()):0==$.value&&($.value=!0),e},oe=e=>{if(0!=e.length){for(let i=0;i<e.length;++i){let l={};l["dur"]=e[i]["dur"],l["h"]=e[i]["h"],l["w"]=e[i]["w"],l["hasextra"]=e[i]["hasextra"],l["id"]=e[i]["id"],l["maddr"]=e[i]["maddr"],l["msize"]=e[i]["msize"],l["mtype"]=e[i]["mtype"],l["pinnedtime"]=e[i]["pinnedtime"],l["needshow"]=!0,l["select"]=!1,t.value.push(l)}te.value=!1}else te.value=!1},re=()=>{if(1==te.value)return;te.value=!0;let e={action:"backupuploaditemlist"};e["name"]=se,e["start"]=le(),e["limit"]=_;let t=JSON.stringify(e);u.o.request.backupuploaditemlist(t,function(e,t,i){var l=JSON.parse(e);if(1==l["status"]&&0==l["items"].length)return te.value=!1,ie.value=!0,ne(),void Z();0!=l["status"]?oe(l["items"]):te.value=!1},function(e,t){te.value=!1})},ae=(0,r.KR)(null);let se="";return(0,n.sV)(()=>{window.Init=e=>{se=e,re()},window.HideItem=e=>{for(let i=0;i<t.value.length;++i)if(t.value[i]["id"]==e){t.value[i]["needshow"]=!1;break}ne()}}),(0,n.dY)(()=>{B.value=ae.value.GetWidth(),(0,s.RA)(),V()}),(e,t)=>((0,n.uX)(),(0,n.CE)("div",h,[(0,n.Lk)("div",{class:(0,o.C4)(["nodatadiv",{hidden:1==$.value}]),style:{position:"absolute","text-align":"center",width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[(0,n.Lk)("img",{src:i(10829),style:{width:"10vh",height:"10vh"}},null,8,v)],2),(0,n.Lk)("div",{class:(0,o.C4)({hidden:0==$.value}),style:{width:"100%",height:"100%",position:"relative"}},[(0,n.bF)(a.A,{ref_key:"mediaflow",ref:ae,style:{width:"100%",height:"100%"},flowdata:F.value,onEnterselectmode:l,onHandlescroll:Y,onLayoutend:ee},{content:(0,n.k6)(({item:e})=>[(0,n.Lk)("div",{class:"grid-itemmedia grid-item canclick",style:{position:"relative",padding:"0.3vh",overflow:"hidden","box-sizing":"border-box"},onClick:t=>K(e)},[1==R.value?((0,n.uX)(),(0,n.CE)("div",g,[1==e.select?((0,n.uX)(),(0,n.CE)("img",{key:0,class:"itemselectpic",src:i(81120),style:{width:"100%",height:"100%"}},null,8,p)):(0,n.Q3)("",!0),0==e.select?((0,n.uX)(),(0,n.CE)("img",{key:1,class:"itemselectpic",src:i(48463),style:{width:"100%",height:"100%"}},null,8,y)):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:"imgdiv",style:(0,o.Tr)([{width:"100%",height:"300px"},{height:D(e)}])},[(0,n.Lk)("img",{class:"mediapic",style:{width:"100%",height:"100%"},src:P(e)},null,8,m)],4),(0,n.Lk)("div",k,[2==e.mtype?((0,n.uX)(),(0,n.CE)("div",w,[(0,n.Lk)("div",b,[(0,n.Lk)("img",{style:{position:"absolute",width:"1.5vh",height:"1.5vh"},src:i(12623)},null,8,L)]),(0,n.Lk)("div",{class:"videoduration",style:{"margin-left":"0.5vh","font-size":"1rem",color:"#6F87A8"},innerHTML:W(e)},null,8,x)])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:"filesize",style:{position:"absolute",right:"0",top:"0",width:"35%",height:"100%","font-size":"1rem","line-height":"3vh",color:"#6F87A8","text-align":"right"},innerHTML:q(e)},null,8,T)])],8,f)]),foot:(0,n.k6)(()=>[1==U.value?((0,n.uX)(),(0,n.CE)("div",O,[(0,n.Lk)("div",C,[t[2]||(t[2]=(0,n.Lk)("div",{style:{background:"linear-gradient(to left,#efefef, #ddd,#efefef)",height:"1px"}},null,-1)),(0,n.Lk)("div",{class:"finishcontenttongji",style:{color:"#ccc"},innerHTML:I()},null,8,H)])])):(0,n.Q3)("",!0)]),_:1},8,["flowdata"]),(0,n.Lk)("div",{class:(0,o.C4)(["selectbottom",{hidden:0==R.value}]),style:{"background-color":"rgba(255, 255, 255, 0.9)",width:"100%",height:"7vh",bottom:"0",position:"fixed","box-shadow":"0 -5px 15px  #d0d2d3",display:"flex"}},[(0,n.Lk)("div",S,[(0,n.Lk)("div",{onClick:t[0]||(t[0]=e=>z()),style:{display:"block",width:"5vh",height:"4vh",cursor:"pointer"}},[(0,n.Lk)("img",{src:i(87806),width:"100%",height:"100%"},null,8,j)])]),(0,n.Lk)("div",E,[(0,n.Lk)("div",{onClick:t[1]||(t[1]=e=>Q()),style:{display:"block",width:"3.4vh",height:"4vh",margin:"0 auto",cursor:"pointer"}},[(0,n.Lk)("img",{src:i(17180),width:"100%",height:"100%"},null,8,M)])])],2)],2)]))}},z=i(71241);const K=(0,z.A)(R,[["__scopeId","data-v-4ebefe84"]]);var A=K;i(70523),i(17945),i(85044),i(83779),i(38220),i(95956),i(22280),i(1563),i(55668);const X=(0,l.Ef)(A);X.mount("#app")}},t={};function i(l){var n=t[l];if(void 0!==n)return n.exports;var o=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=e,function(){var e=[];i.O=function(t,l,n,o){if(!l){var r=1/0;for(d=0;d<e.length;d++){l=e[d][0],n=e[d][1],o=e[d][2];for(var a=!0,s=0;s<l.length;s++)(!1&o||r>=o)&&Object.keys(i.O).every(function(e){return i.O[e](l[s])})?l.splice(s--,1):(a=!1,o<r&&(r=o));if(a){e.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[l,n,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var l in t)i.o(t,l)&&!i.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){i.j=875}(),function(){i.p=""}(),function(){var e={875:0};i.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,o,r=l[0],a=l[1],s=l[2],u=0;if(r.some(function(t){return 0!==e[t]})){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(s)var d=s(i)}for(t&&t(l);u<r.length;u++)o=r[u],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},l=self["webpackChunkwww"]=self["webpackChunkwww"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=i.O(void 0,[504,996],function(){return i(39407)});l=i.O(l)})();