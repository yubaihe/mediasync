(function(){"use strict";var e={59906:function(e,i,t){var n=t(45130),a=(t(33110),t(58335),t(56768)),l=t(24232),o=t(90144),d=t(89231),r=t(92820),s=t(59048),u=(t(50635),t(91844)),c=t(84820),m=t(11562),v=t(24073);const h={key:0,claa:"mediaimage",style:{width:"100%",height:"100%"}},f={style:{width:"100%",height:"100%"}},y={key:1,claa:"mediavideo",style:{width:"100%",height:"100%"}},p={class:"info"},g={class:"mediaitem layout_flex canclick"},w=["innerHTML"],k={class:"mediaitem layout_flex"},b=["innerHTML"],L={key:0,class:"mediaitem chixushijian layout_flex"},C=["innerHTML"],S={class:"mediaitem layout_flex",ref:"fenbianlvconatiner"},I=["innerHTML"],x=["innerHTML"],T={key:0,class:"layout-right",style:{"margin-right":"3vh","margin-top":"1.8vh",width:"1.5vh",height:"2.5vh"}},O={class:"playaddrdetail",style:{position:"relative",width:"100%",height:"100%"}},_=["src"],E={style:{width:"100%",height:"10vh","text-align":"center","margin-top":"2vh"}};var G={__name:"DiskSwipeSlide",props:{item:{type:Object,required:!0,default:()=>({})},devname:{type:String,required:!0,default:""},autoplayvideo:{type:Boolean,required:!0,default:!1}},emits:["deletemediaitem","videoerror"],setup(e,{expose:i,emit:n}){const G=e;(0,a.wB)(()=>G.autoplayvideo,(e,i)=>{1==G.autoplayvideo?Q():B()});const j=(e,i)=>{J("videoerror",e,i)},M=(e,i)=>(0,d.sD)(e,i),P=(e,i)=>(0,d.y3)(e,i),V=(e,i)=>(0,d.sD)(e,i),R=e=>e.width+" X "+e.height,H=e=>(0,d.FM)(e.size),z=e=>e.createtime,D=e=>e.location!=(0,r.yk)("未知")&&e.location!=(0,r.yk)("获取中..."),A=e=>{if(0==D(e))return;let i={};i["id"]=e.itemid,i["weizhi"]=e.weizhi,i["location"]=e.location,s.f.device.gpsaddress(JSON.stringify(i))},F=(0,o.KR)(null),X=e=>{let i=F.value.offsetWidth,t=F.value.offsetHeight;if(e.width<i&&e.height<t)return e["containerheight"]=e.height+"px",void(e["containerwidth"]=e.width+"px");let n=1*i/e.width,a=1*t/e.height,l=n>a?a:n;0==l&&(l=n+a),l>=.9&&(l=1),e["containerheight"]=e.height*l+"px",e["containerwidth"]=e.width*l+"px"},q=e=>{(0,v.us)(e.itemid,e.weizhi,e.location,(i,t,n)=>{e["location"]=(0,r.yk)(t),e["weizhi"]=(0,r.yk)(n)})},J=n,N=e=>{J("deletemediaitem",e)},U=e=>{0!=G.autoplayvideo&&K.value.PlayVideo()},K=(0,o.KR)(null),B=()=>{2==G.item.mtype&&K.value.PauseVideo()},Q=()=>{2==G.item.mtype&&K.value.PlayVideo()},W=()=>(0,d.sD)(G.item.file,G.devname),Y=()=>2==G.item.mtype?K.value.GetErrorCode():0;return i({StopVideo:B,PlayVideo:Q,GetUrl:W,InitItemWh:X,GetVideoErrorCode:Y}),(0,a.sV)(()=>{}),(0,a.dY)(()=>{(0,d.RA)(),(0,r.hC)(),q(G.item),X(G.item)}),(i,n)=>((0,a.uX)(),(0,a.CE)("div",{class:"DiskSlideItem",ref_key:"mediaplayer",ref:F},[(0,a.bF)((0,o.R1)(u.r),{options:{scrollbars:{autoHide:"scroll",visibility:"visible"}},class:"divmain",style:{width:"100%",height:"100%"}},{default:(0,a.k6)(()=>[(0,a.Lk)("div",{class:"media",style:(0,l.Tr)([{width:"100%",height:"100%"},{height:e.item.containerheight}])},[1==e.item.mtype?((0,a.uX)(),(0,a.CE)("div",h,[(0,a.Lk)("div",f,[(0,a.bF)(m.A,{src:V(e.item.file,e.devname),imgwidth:e.item.containerwidth,imgheight:e.item.containerheight,style:{width:"100%",height:"100%","text-align":"center",display:"flex","justify-content":"center"}},null,8,["src","imgwidth","imgheight"])])])):((0,a.uX)(),(0,a.CE)("div",y,[(0,a.bF)(c.A,{ref_key:"videoPlayer",ref:K,src:M(e.item.file,e.devname),poster:P(e.item.itemid,e.devname),onCanPlayThrough:U,onPlayError:j,autoplay:e.autoplayvideo,tag:e.item,style:{width:"100%",height:"100%"}},null,8,["src","poster","autoplay","tag"])]))],4),(0,a.Lk)("div",p,[(0,a.Lk)("div",g,[n[2]||(n[2]=(0,a.Lk)("div",{class:"language layout-left mediaitemtitle mediapaitimelabel"},"拍摄时间:",-1)),(0,a.Lk)("div",{class:"layout-middle paisheshijian",innerHTML:z(e.item)},null,8,w)]),(0,a.Lk)("div",k,[n[3]||(n[3]=(0,a.Lk)("div",{class:"language language layout-left mediaitemtitle mediasizelabel"},"媒体大小:",-1)),(0,a.Lk)("div",{class:"layout-middle mediaitemsize",innerHTML:H(e.item)},null,8,b)]),2==e.item.mtype?((0,a.uX)(),(0,a.CE)("div",L,[n[4]||(n[4]=(0,a.Lk)("div",{class:"language layout-left mediaitemtitle mediadurationlabel"},"持续时间:",-1)),(0,a.Lk)("div",{class:"layout-middle mediaitemdur",innerHTML:(0,o.R1)(d._D)(e.item.duration)},null,8,C)])):(0,a.Q3)("",!0),(0,a.Lk)("div",S,[n[5]||(n[5]=(0,a.Lk)("div",{class:"language layout-left mediaitemtitle fenbianlvlabel"},"分辨率:",-1)),(0,a.Lk)("div",{class:"layout-middle fenbianlv",innerHTML:R(e.item)},null,8,I)],512),(0,o.R1)(d.CC)()?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,l.C4)(["mediaitem playaddr layout_flex",{canclick:1==D(e.item)}]),onClick:n[0]||(n[0]=i=>A(e.item))},[n[6]||(n[6]=(0,a.Lk)("div",{class:"language layout-left mediaitemtitle mediapaiaddrlabel"},"拍摄地点:",-1)),(0,a.Lk)("div",{class:"layout-middle paishedidian",innerHTML:e.item.location},null,8,x),1==D(e.item)?((0,a.uX)(),(0,a.CE)("div",T,[(0,a.Lk)("div",O,[(0,a.Lk)("img",{style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:t(52419)},null,8,_)])])):(0,a.Q3)("",!0)],2)):(0,a.Q3)("",!0),(0,a.Lk)("div",E,[(0,a.Lk)("div",{class:"language mediaitemdel canclick mediaremovelabel",onClick:n[1]||(n[1]=i=>N(e.item)),style:{width:"20vh",height:"7vh","background-color":"#d9534f",border:"#d43f3a 1px solid",margin:"0 auto","border-radius":"4px",color:"white","font-size":"2.5vh","text-align":"center","line-height":"7vh"}}," 删 除")])])]),_:1})],512))}},j=t(71241);const M=(0,j.A)(G,[["__scopeId","data-v-063e0711"]]);var P=M,V=t(48319);const R={class:"DiskMediaPlayerMain"},H=["src"];var z={__name:"App",setup(e){const i=(0,o.KR)(!0),n=(e,i)=>{k.value.BindInstance(e,i)},u=(e,i)=>{let t=k.value.GetCurItem();e.itemid==t.itemid&&window.ToastError((0,r.yk)("播放错误,错误码: ")+i)},c=()=>{i.value=!1,s.f.device.diskempty()},m=e=>{s.f.device.diskswitchitem(e.itemid+"&"+e.ignore),k.value.EnumInstance(i=>{e.itemid==i.itemid?(i.autoplayvideo=!0,setTimeout(()=>{let i=k.value.GetInstance(e.itemid).GetVideoErrorCode();0!=i&&window.ToastError((0,r.yk)("播放错误,错误码: ")+i)},500)):i.autoplayvideo=!1}),setTimeout(()=>{p()},100)},v=e=>{k.value.Disable(),k.value.GetInstance(e.itemid).StopVideo(),ShowConfirm((0,r.yk)("确认"),(0,r.yk)("删除后将永远丢失该媒体的存储,请确认!"),1,(0,r.yk)("按钮确定"),function(){let i={action:"diskdeleteitem"};i["dev"]=g,i["itemid"]=e.itemid,s.o.request.diskdeleteitem(JSON.stringify(i),function(i,t,n){k.value.Enable();var a=JSON.parse(i);if(1!=a["status"])return void Toast((0,r.yk)("系统错误!"));s.f.device.diskdeleteitem(e.itemid+"");let l=k.value.GetItemCount();1!=l?k.value.RemoveCurSel():s.f.device.closewindow()},function(e,i){k.value.Enable()})},(0,r.yk)("按钮取消"),function(){UnSetToast(),k.value.GetInstance(e.itemid).PlayVideo(),k.value.Enable()})},h=()=>{let e=k.value.GetCurItem();k.value.GetInstance(e.itemid).StopVideo()},f=()=>{let e=k.value.GetCurItem();k.value.GetInstance(e.itemid).PlayVideo()},y=()=>{let e=k.value.GetCurItem();return k.value.GetInstance(e.itemid).GetUrl()},p=()=>{let e=k.value.GetCurItem();k.value.GetInstance(e.itemid).InitItemWh(e)};(0,a.xo)(()=>{window.removeEventListener("resize",p)});let g="",w=0;(0,a.sV)(()=>{window.addEventListener("resize",p),window.DownLoadFileCheck=()=>{h(),ShowConfirm((0,r.yk)("确认"),(0,r.yk)("请确认是否下载该文件?"),1,(0,r.yk)("按钮确定"),function(){UnSetToast();let e=y();s.f.device.diskdownloadfile(e)},(0,r.yk)("按钮取消"),function(){UnSetToast(),f()})},window.StopPlay=()=>{h()},window.ContinuePlay=()=>{f()},window.InitSwiper=(e,i,t)=>{g=i,w=t,C(e)},window.SetIgnore=(e,i)=>{let t={action:"disksetignore"};t["dev"]=g,t["itemid"]=e,t["ignore"]=i,s.o.request.disksetignore(JSON.stringify(t),function(t,n,a){var l=JSON.parse(t);1==l["status"]&&(1==i?Toast((0,r.yk)("已取消上传")):Toast((0,r.yk)("已加入上传列表")),s.f.device.disksetignoreack(e+""))},function(e,i){})}});const k=(0,o.KR)(null),b=e=>{let i=Object.hasOwn(e,"prev"),t=Object.hasOwn(e,"next");e["cur"]["location"]=(0,r.yk)("获取中..."),1==i&&(e["prev"]["location"]=(0,r.yk)("获取中...")),1==t&&(e["next"]["location"]=(0,r.yk)("获取中...")),k.value.AssembleItems(e)};let L=0;const C=e=>{let i={action:"diskitemdetail"};i["dev"]=g,i["itemid"]=e,i["ignore"]=w,s.o.request.diskitemdetail(JSON.stringify(i),function(e,i,t){L=0;var n=JSON.parse(e);b(n)},function(i,t){3!=L&&setTimeout(()=>{L++,C(e)},500)})};return(0,a.dY)(()=>{(0,d.RA)(),(0,r.hC)(),window.InitSwiper(1,"sda1",0)}),(e,d)=>((0,a.uX)(),(0,a.CE)("div",R,[(0,a.Lk)("div",{class:(0,l.C4)(["nodatadiv",{hidden:1==i.value}]),style:{position:"absolute","text-align":"center",width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[(0,a.Lk)("img",{src:t(10829),style:{width:"10vh",height:"10vh"}},null,8,H)],2),(0,a.bF)(V.A,{ref_key:"swipewraper",ref:k,class:(0,l.C4)({hidden:0==i.value}),style:{width:"100%",height:"100%",position:"relative"},onRequestItem:C,onItemSelect:m,onRemoveCurSel:v,onEmpty:c},{content:(0,a.k6)(({item:e})=>[(0,a.bF)(P,{style:{width:"100%",height:"100%"},item:e,autoplayvideo:e.autoplayvideo,devname:(0,o.R1)(g),onDeletemediaitem:v,ref:i=>n(i,e.itemid),onVideoerror:u},null,8,["item","autoplayvideo","devname"])]),_:1},8,["class"])]))}};const D=(0,j.A)(z,[["__scopeId","data-v-2e21d8c2"]]);var A=D;t(70523),t(17945),t(85044),t(83779),t(38220),t(95956),t(22280),t(1563),t(55668);(0,n.Ef)(A).mount("#app")}},i={};function t(n){var a=i[n];if(void 0!==a)return a.exports;var l=i[n]={id:n,loaded:!1,exports:{}};return e[n].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}t.m=e,function(){var e=[];t.O=function(i,n,a,l){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],l=e[u][2];for(var d=!0,r=0;r<n.length;r++)(!1&l||o>=l)&&Object.keys(t.O).every(function(e){return t.O[e](n[r])})?n.splice(r--,1):(d=!1,l<o&&(o=l));if(d){e.splice(u--,1);var s=a();void 0!==s&&(i=s)}}return i}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,a,l]}}(),function(){t.n=function(e){var i=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(i,{a:i}),i}}(),function(){t.d=function(e,i){for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){t.j=991}(),function(){t.p=""}(),function(){var e={991:0};t.O.j=function(i){return 0===e[i]};var i=function(i,n){var a,l,o=n[0],d=n[1],r=n[2],s=0;if(o.some(function(i){return 0!==e[i]})){for(a in d)t.o(d,a)&&(t.m[a]=d[a]);if(r)var u=r(t)}for(i&&i(n);s<o.length;s++)l=o[s],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(u)},n=self["webpackChunkwww"]=self["webpackChunkwww"]||[];n.forEach(i.bind(null,0)),n.push=i.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504,996],function(){return t(59906)});n=t.O(n)})();