(function(){"use strict";var e={49623:function(e,i,t){e.exports=t.p+"img/time.d753756c.png"},50623:function(e,i,t){e.exports=t.p+"img/refresh.50021f3a.png"},84026:function(e,i,t){e.exports=t.p+"img/gpsbig.1a456fab.png"},87804:function(e,i,t){var n=t(45130),l=(t(33110),t(58335),t(56768)),a=t(24232),r=t(90144),o=t(89231),u=t(84820),s=t(11562),d=t(79620),h=t(92820),c=t(59048),v=t(26445),f=t(65943);const g={class:"MediaRandomMain"},p={style:{width:"100%",height:"100%",display:"flex","flex-direction":"column",position:"relative"}},y={class:"media",style:{width:"100%",height:"100%"}},m={key:0,claa:"mediaimage",style:{width:"100%",height:"100%"}},w={key:0,style:{width:"100%",height:"100%"}},k={class:"imghasextra canclick",style:{position:"absolute","z-index":"100",width:"30px",height:"30px"}},x=["src"],L={class:"liveImagePlayer",style:{position:"absolute",width:"100%",height:"100%"}},b={key:1,claa:"mediavideo",style:{width:"100%",height:"100%"}},C={style:{padding:"2vh"}},O=["src"],S={style:{"flex-grow":"1",height:"100%",padding:"1vh 1.5vh 1.5vh 1.5vh",color:"#CCCCCC","text-shadow":"1px 1px 2px rgba(0,0,0,0.1)",overflow:"hidden"}},P={style:{width:"100%",height:"3vh",display:"flex","flex-direction":"row","align-items":"center"}},T={style:{position:"relative",width:"1.5vh",height:"1.5vh"}},R=["src"],j=["innerHTML"],E={style:{width:"100%",height:"3vh",display:"flex","flex-direction":"row","align-items":"center"}},M={style:{position:"relative",width:"1.5vh",height:"1.5vh"}},H=["src"],_=["innerHTML"],K={style:{height:"100%",width:"4vh",display:"flex","justify-content":"center","align-items":"center"}},J={style:{width:"1.4vh",height:"2.5vh","margin-right":"1vh",position:"relative"}},N=["src"],z={style:{padding:"1vh"}},A=["src"];var I={__name:"App",setup(e){const i=(0,r.KR)(null),n=(0,r.KR)(!1),I=()=>{},X=()=>{},V=(0,r.KR)(null),q=e=>{2==e.mtype&&V.value.PauseVideo()},F=e=>{2==e.mtype&&V.value.PlayVideo()},D=()=>{le()},Q=e=>{q(e),c.f.device.itemdetail(e.id+"")},U=e=>{1!=n.value&&(n.value=!0,q(e),ShowConfirm((0,h.yk)("确认"),(0,h.yk)("删除后将永远丢失该媒体的存储,请确认!"),1,(0,h.yk)("按钮确定"),function(){var i={action:"delmediaitem"};i["id"]=e.id,c.o.request.delmediaitem(JSON.stringify(i),function(i,t,l){var a=JSON.parse(i);if(n.value=!1,1!=a["status"])return void Toast((0,h.yk)("系统错误!"));let r={};r["id"]=e.id,r["mtype"]=e.mtype,r["favorite"]=e.favoritetime>0?1:0,r["paitime"]=e.paitime,r["addtime"]=e.addtime,c.f.device.deleteitem(JSON.stringify(r)),le()},function(i,t){F(e),n.value=!1})},(0,h.yk)("按钮取消"),function(){UnSetToast(),F(e),n.value=!1}))},W=e=>{if(null==e)return"";let i=(0,o.Vz)(e.paitime);return"{0} ({1})".format(i.split(" ")[0],e.device)},Y=e=>{if(null==e)return"";if(0!=e.location.length)return e.location;if(0==e.weizhi.length)return(0,h.yk)("未知");let i=e.weizhi.split("&");return 2!=i.length||0==parseInt(i[0])||0==parseInt(i[1])?(0,h.yk)("未知"):e.weizhi};(0,l.sV)(()=>{window.RefreshCurItem=()=>{ae()},window.PauseVideo=()=>{q(i.value)}});const B=(0,r.KR)(null),G=()=>{null!=B.value&&B.value.Play()},Z=e=>{G()},$=()=>{},ee=(0,f.A)(()=>{null!=ie.value&&ne(i.value)},400);window.addEventListener("resize",ee),(0,l.dY)(()=>{(0,o.RA)(),(0,h.hC)(),(0,v.M8)(300,e=>{G()},()=>{}),le()});const ie=(0,r.KR)(null),te=(0,r.KR)(null),ne=e=>{if(null==e)return;let i=ie.value.offsetHeight;ie.value.offsetHeight>window.innerHeight-te.value.offsetHeight&&(i=window.innerHeight-te.value.offsetHeight);let t=ie.value.offsetWidth;if(1==e.mtype&&1==e.hasextra)return e["containerheight"]=i+"px",void(e["containerwidth"]=t+"px");if(e.width<t&&e.height<i)return e["containerheight"]=e.h+"px",void(e["containerwidth"]=e.w+"px");let n=1*t/e.w,l=1*i/e.h,a=n>l?l:n;0==a&&(a=n+l),a>=.9&&(a=1),e["containerheight"]=e.h*a+"px",e["containerwidth"]=e.w*a+"px"},le=()=>{if(1==n.value)return;n.value=!0,i.value=null;let e={action:"mediarandom",id:0};e["devnames"]=(0,o.sL)(),c.o.request.mediarandom(JSON.stringify(e),function(e,t,l){var a=JSON.parse(e);0!=a.status?(i.value=a.item,setTimeout(()=>{ne(i.value),n.value=!1},10)):n.value=!1},function(){n.value=!1})},ae=()=>{if(1==n.value)return;n.value=!0;let e={action:"mediarandom"};e["id"]=i.value.id,e["devnames"]=(0,o.sL)(),i.value=null,c.o.request.mediarandom(JSON.stringify(e),function(e,t,l){var a=JSON.parse(e);0!=a.status?(i.value=a.item,setTimeout(()=>{ne(i.value),n.value=!1},10)):n.value=!1},function(){n.value=!1})};return(e,n)=>((0,l.uX)(),(0,l.CE)("div",g,[(0,l.Lk)("div",p,[(0,l.Lk)("div",{class:"cardMain",ref_key:"mediaplayer",ref:ie,style:{width:"100%",height:"100%",position:"relative",padding:"2vh 2vh 0 2vh"}},[null!=i.value?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"card",style:(0,a.Tr)({height:i.value.containerheight})},[(0,l.Lk)("div",y,[1==i.value.mtype?((0,l.uX)(),(0,l.CE)("div",m,[0==i.value.hasextra?((0,l.uX)(),(0,l.CE)("div",w,[(0,l.bF)(s.A,{src:(0,r.R1)(o.Dl)(i.value.maddr),imgwidth:i.value.containerwidth,imgheight:i.value.containerheight,style:{width:"100%",height:"100%","text-align":"center",display:"flex","justify-content":"center"}},null,8,["src","imgwidth","imgheight"])])):((0,l.uX)(),(0,l.CE)("div",{key:1,style:{width:"100%",height:"100%"},onClick:G},[(0,l.Lk)("div",k,[(0,l.Lk)("img",{src:t(87426),style:{position:"absolute",width:"100%",height:"100%"}},null,8,x)]),(0,l.Lk)("div",L,[(0,l.bF)(d.A,{ref_key:"liveImagePlayer",ref:B,tag:i.value,imagesrc:(0,r.R1)(o.Dl)(i.value.maddr),autoplay:!0,videosrc:(0,r.R1)(o.eO)(i.value.maddr),imgwidth:i.value.containerwidth,imgheight:i.value.containerheight,style:{width:"100%",height:"100%","text-align":"center"},onCanPlayThroughShiKuang:Z,onPlayShiKuangEnd:$},null,8,["tag","imagesrc","videosrc","imgwidth","imgheight"])])]))])):((0,l.uX)(),(0,l.CE)("div",b,[(0,l.bF)(u.A,{ref_key:"videoPlayer",ref:V,src:(0,r.R1)(o.qy)(i.value.maddr),poster:(0,r.R1)(o.I)(i.value.maddr),onCanPlayThrough:I,onPlayError:X,autoplay:!0,tag:i.value,style:{width:"100%",height:"100%"}},null,8,["src","poster","tag"])]))])],4)):(0,l.Q3)("",!0)],512),(0,l.Lk)("div",{ref_key:"mediainfo",ref:te,class:"menumain",style:{position:"relative",display:"flex","flex-direction":"row","justify-content":"center","align-items":"center",padding:"0 2vh 2vh 2vh"}},[(0,l.Lk)("div",C,[(0,l.Lk)("div",{class:"circleitem canclick",onClick:n[0]||(n[0]=e=>U(i.value))},[(0,l.Lk)("img",{style:{position:"absolute",width:"60%",height:"60%",scale:"fit","margin-left":"20%","margin-top":"20%"},src:t(17180)},null,8,O)])]),(0,l.Lk)("div",{class:"card canclick",onClick:n[1]||(n[1]=e=>Q(i.value)),style:{"flex-grow":"1","background-color":"#808eab",height:"8vh",display:"flex","flex-direction":"row"}},[(0,l.Lk)("div",S,[(0,l.Lk)("div",P,[(0,l.Lk)("div",null,[(0,l.Lk)("div",T,[(0,l.Lk)("img",{style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:t(49623)},null,8,R)])]),(0,l.Lk)("div",{style:{"flex-grow":"1","padding-left":"0.2vh","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},innerHTML:W(i.value)},null,8,j)]),(0,l.Lk)("div",E,[(0,l.Lk)("div",null,[(0,l.Lk)("div",M,[(0,l.Lk)("img",{style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:t(84026)},null,8,H)])]),(0,l.Lk)("div",{style:{"flex-grow":"1","padding-left":"0.2vh","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},innerHTML:Y(i.value)},null,8,_)])]),(0,l.Lk)("div",K,[(0,l.Lk)("div",J,[(0,l.Lk)("img",{style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:t(52419)},null,8,N)])])]),(0,l.Lk)("div",z,[(0,l.Lk)("div",{class:"circleitem canclick",onClick:n[2]||(n[2]=e=>D())},[(0,l.Lk)("img",{style:{position:"absolute",width:"60%",height:"60%",scale:"fit","margin-left":"20%","margin-top":"20%"},src:t(50623)},null,8,A)])])],512)])]))}};const X=I;var V=X;t(70523),t(17945),t(85044),t(83779),t(38220),t(95956),t(22280),t(1563),t(55668);const q=(0,n.Ef)(V);q.mount("#app")}},i={};function t(n){var l=i[n];if(void 0!==l)return l.exports;var a=i[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}t.m=e,function(){var e=[];t.O=function(i,n,l,a){if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],l=e[d][1],a=e[d][2];for(var o=!0,u=0;u<n.length;u++)(!1&a||r>=a)&&Object.keys(t.O).every(function(e){return t.O[e](n[u])})?n.splice(u--,1):(o=!1,a<r&&(r=a));if(o){e.splice(d--,1);var s=l();void 0!==s&&(i=s)}}return i}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,l,a]}}(),function(){t.n=function(e){var i=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(i,{a:i}),i}}(),function(){t.d=function(e,i){for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){t.j=172}(),function(){t.p=""}(),function(){var e={172:0};t.O.j=function(i){return 0===e[i]};var i=function(i,n){var l,a,r=n[0],o=n[1],u=n[2],s=0;if(r.some(function(i){return 0!==e[i]})){for(l in o)t.o(o,l)&&(t.m[l]=o[l]);if(u)var d=u(t)}for(i&&i(n);s<r.length;s++)a=r[s],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(d)},n=self["webpackChunkwww"]=self["webpackChunkwww"]||[];n.forEach(i.bind(null,0)),n.push=i.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504,996],function(){return t(87804)});n=t.O(n)})();