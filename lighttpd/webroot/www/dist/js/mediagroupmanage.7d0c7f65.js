(function(){"use strict";var e={50549:function(e,t,l){var n=l(45130),i=(l(44114),l(56768)),o=l(90144),a=l(24232),u=l(91844),r=(l(50635),l(59048)),s=l(92820),c=l(89231);const d={class:"MediaGroupManagerMain",style:{display:"flex","flex-direction":"column"}},v={style:{float:"left",width:"6vh",height:"6vh","margin-top":"1vh","margin-left":"1vh"}},f=["src"],g=["onClick"],h=["src"],p=["innerHTML"],y={style:{float:"right",width:"8.35vh",height:"5vh","margin-right":"2vh",position:"absolute",right:"0"}},k={style:{position:"absolute"},onclick:"event.stopPropagation();"},b=["src"],m=["onClick"],L={class:"dialog-content"},w={class:"dialog-content-bd",style:{"max-height":"658px","overflow-y":"auto"}},S={style:{float:"left",position:"relative",width:"100%"}},_=["innerHTML"],O={class:"dialog-content-ft side"},C={style:{width:"100%",height:"25vh","background-color":"#ffffff","border-radius":"2vh 2vh 0 0",bottom:"0",position:"absolute"},onclick:"event.stopPropagation();"},T={style:{width:"80%","text-align":"center",height:"6vh","line-height":"6vh","font-size":"1.9vh","margin-left":"10%"}};var x={__name:"App",setup(e){const t=(0,o.KR)(!1),n=(0,o.KR)([]),x=(0,o.KR)(!1),q=(0,o.KR)(!1),K=(0,o.KR)(null),M=e=>{},N=e=>{e.target.value=(0,c.ZY)(e.target.value)},J=e=>{},H=e=>{e.target.value=(0,c.ZY)(e.target.value)},D=()=>{x.value=!1,q.value=!1,G.value=!1,j=null},P=()=>{F(),x.value=!0,K.value.querySelector(".paneltitle").innerHTML=(0,s.yk)("添加分组"),K.value.querySelector(".panel_setting").innerHTML=(0,s.yk)("提交"),K.value.querySelector(".panel_cancel").innerHTML=(0,s.yk)("按钮取消"),K.value.querySelector(".groupnameinputlabel").placeholder=(0,s.yk)("分组名称"),K.value.querySelector(".panel_value").value="",setTimeout(()=>{K.value.querySelector(".panel_value").focus()},300)},R=()=>{r.o.request.groupinfo('{"action":"groupinfo"}',function(e,l,i){var o=JSON.parse(e);if(1==o["status"]){var a=o["items"];0!=a.length?(t.value=!1,n.value=o.items):t.value=!0}else t.value=!0},function(e,t){})};let j=null;const z=e=>{F(),q.value=!0,j=e,K.value.querySelector(".paneltitle").innerHTML=(0,s.yk)("修改分组"),K.value.querySelector(".panel_setting").innerHTML=(0,s.yk)("按钮确定"),K.value.querySelector(".panel_cancel").innerHTML=(0,s.yk)("按钮取消"),K.value.querySelector(".groupnameinputlabel").placeholder=(0,s.yk)("分组名称"),K.value.querySelector(".panel_value").value=e.name,setTimeout(()=>{K.value.querySelector(".panel_value").focus()},300)},E=(0,o.KR)(0),A=(0,i.EW)(()=>({"--panelheight":E.value+"px"}));(0,i.sV)(()=>{window.CancelDel=()=>{1!=$&&(DialogToast("",(0,s.yk)("正在取消..."),"",null),$=!0)},window.OnKeyBoardShow=e=>{E.value=0-document.body.clientHeight*e},window.OnKeyBoardHide=()=>{E.value=0},window.OnKeyBack=()=>{let e=!1;1!=x.value&&1!=q.value&&1!=G.value||(e=!0,D()),0==e&&r.f.device.canback(),0==e&&r.f.device.canback()}}),(0,i.dY)(()=>{(0,c.RA)(),(0,s.hC)(),R()});let B=null;const F=()=>{if(null!=B)return B.classList.remove("delbutton_in"),B.classList.add("delbutton_out"),void(B=null)},I=e=>{e.stopPropagation();let t=e.target.parentNode.querySelector(".delgroup");if(t==B)return B.classList.remove("delbutton_in"),B.classList.add("delbutton_out"),void(B=null);null!=B&&(B.classList.remove("delbutton_in"),B.classList.add("delbutton_out"),B=null),1==t.classList.contains("delbutton_in")?(t.classList.remove("delbutton_in"),t.classList.add("delbutton_out")):(t.classList.remove("delbutton_out"),t.classList.add("delbutton_in"),B=t)},G=(0,o.KR)(!1);let X=null,Y=(0,o.KR)("");const W=(e,t)=>{e.stopPropagation(),X=t,Y.value=t.name,G.value=!0};let Z=0,V=0,Q=null,U=20,$=!1;const ee=e=>{if(0==Q.length)return void te(e);let t=Q.shift(),l={action:"delmediaitem"};l["id"]=t,r.o.request.delmediaitem(JSON.stringify(l),function(t,l,n){var i=JSON.parse(t);if(0!=i.status)if(Z++,DialogToast("",(0,s.yk)("正在删除")+"("+Z+"/"+V+")",(0,s.yk)("取 消"),window.CancelDel),0==$)ee(e);else{let t={optype:"del"};t["id"]=e,r.f.device.groupchange(JSON.stringify(t)),Toast((0,s.yk)("已取消!")),DialogClose()}},function(e,t){})},te=e=>{let t={action:"groupitemlist",start:0,id:0};t["gid"]=e,t["limit"]=U,t["devnames"]=(0,c.sL)(),r.o.request.groupitemlist(JSON.stringify(t),function(t,l,n){var i=JSON.parse(t);if(0!=i["items"].length){0==Z&&(V=i.tcount),Q=new Array;for(var o=0;o<i["items"].length;++o)Q.push(i["items"][o].id);ee(e)}else ie()},function(e,t){})},le=()=>{G.value=!1;let e=document.getElementById("checkdelfiles").checked;1==e?(V=0,Z=0,$=!1,Q=null,DialogToast("",(0,s.yk)("请等待..."),(0,s.yk)("取 消"),window.CancelDel),setTimeout(function(){te(X.id)},100)):ie()},ne=e=>{for(let t=0;t<n.value.length;++t)if(n.value[t].id==e){n.value.splice(t,1);break}},ie=()=>{let e=X.id,t={action:"groupdel"};t["id"]=e,t["devnames"]=(0,c.sL)(),r.o.request.groupdel(JSON.stringify(t),function(t,l,n){var i=JSON.parse(t);if(1!=i["status"])return void Toast((0,s.yk)("删除失败!"));let o={optype:"del"};o["id"]=e,r.f.device.groupchange(JSON.stringify(o)),Toast((0,s.yk)("删除成功!")),DialogClose(),ne(e)},function(e,t){Toast((0,s.yk)("设备异常!"))})},oe=()=>{G.value=!1},ae=e=>{for(let t=0;t<n.value.length;++t)if(n.value[t].id==e)return!0;return!1},ue=(e,t)=>{let l={action:"groupupdate"};l["id"]=e,l["name"]=t,r.o.request.groupupdate(JSON.stringify(l),function(l,i,o){var a=JSON.parse(l),u=a["id"];if(1!=a["status"])return 1==ae(u)?Toast((0,s.yk)("该分组已经存在!")):Toast((0,s.yk)("请求异常!")),void D();for(let r=0;r<n.value.length;++r)if(n.value[r].id==e){n.value[r].name=t;break}let c={optype:"update"};c["id"]=u,c["name"]=t,r.f.device.groupchange(JSON.stringify(c)),D()},function(e,t){Toast((0,s.yk)("设备异常!"))})},re=e=>{let t={action:"groupadd"};t["name"]=e,r.o.request.groupadd(JSON.stringify(t),function(t,l,n){let i=JSON.parse(t);if(1!=i["status"])return void D();D();let o=i["id"];if(1==ae(o))return void Toast((0,s.yk)("该分组已经存在!"));R();let a={optype:"add"};a["id"]=o,a["name"]=e,r.f.device.groupchange(JSON.stringify(a))},function(e,t){Toast((0,s.yk)("设备异常!"))})},se=()=>{let e=K.value.querySelector(".panel_value").value;1==x.value?re(e):ue(j.id,e)},ce=()=>{j=null,D()};return(e,t)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",d,[(0,i.Lk)("div",{class:"groupitem canclick",onClick:t[0]||(t[0]=e=>P())},[(0,i.Lk)("div",v,[(0,i.Lk)("img",{src:l(67310),width:"100%",height:"100%"},null,8,f)]),t[6]||(t[6]=(0,i.Lk)("div",{class:"addgrouplabel",style:{float:"left","font-size":"2.4vh","font-weight":"550","line-height":"8vh","margin-left":"1vh"}},"添加分组",-1))]),(0,i.bF)((0,o.R1)(u.r),{options:{scrollbars:{autoHide:"scroll",visibility:"visible"}},style:{width:"100%",height:"100%","flex-grow":"1"}},{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.value,e=>((0,i.uX)(),(0,i.CE)("div",{class:"divmain",key:e.id},[(0,i.Lk)("div",{class:"groupitem canclick",style:{"margin-right":"10vh"},onClick:t=>z(e)},[(0,i.Lk)("div",{class:"showdelbuttom",style:{float:"left",width:"4vh",height:"4vh","margin-left":"2vh"},onClick:I},[(0,i.Lk)("img",{src:l(49171),width:"100%",height:"100%"},null,8,h)]),(0,i.Lk)("div",{class:"groupitemname",style:{float:"left","font-size":"2.4vh","font-weight":"550","line-height":"8.6vh","margin-left":"2vh"},innerHTML:e.name},null,8,p),(0,i.Lk)("div",y,[(0,i.Lk)("div",k,[(0,i.Lk)("img",{src:l(23041),width:"100%",height:"100%"},null,8,b)]),(0,i.Lk)("div",{class:"delgroup canclick",style:{"z-index":"1",height:"100%",float:"right",width:"0px",overflow:"hidden"},onClick:t=>W(t,e)},[...t[7]||(t[7]=[(0,i.Lk)("div",{class:"delgrouplabel",style:{"background-color":"#d84140",width:"100%",height:"100%","border-radius":"3px",color:"#ffffff","text-align":"center","line-height":"5vh","font-size":"2.3vh"}}," 删除",-1)])],8,m)])],8,g)]))),128))]),_:1})]),(0,i.Lk)("div",{class:(0,a.C4)(["dialogpanel",{hidden:0==x.value&&0==q.value&&0==G.value}]),style:{position:"absolute",width:"100%",height:"100%",left:"0",top:"0","background-color":"rgba(122, 122, 122, .8)"},onClick:t[5]||(t[5]=e=>D())},[(0,i.Lk)("div",{class:(0,a.C4)(["panel dialog dialog-open dialog-modal",{hidden:0==G.value}]),"data-style":"ios",onClick:t[3]||(t[3]=e=>{e.stopPropagation()})},[t[12]||(t[12]=(0,i.Lk)("div",{class:"dialog-overlay"},null,-1)),(0,i.Lk)("div",L,[t[11]||(t[11]=(0,i.Lk)("div",{class:"dialog-content-hd"},[(0,i.Lk)("h3",{class:"language dialogcontenttitlelabel dialog-content-title"},"确认")],-1)),(0,i.Lk)("div",w,[(0,i.Lk)("div",S,[(0,i.Lk)("div",null,[t[8]||(t[8]=(0,i.Lk)("span",{class:"language paneldellabel"},"请确认是否需要删除分组",-1)),(0,i.Lk)("span",{class:"name",innerHTML:(0,o.R1)(Y)},null,8,_),t[9]||(t[9]=(0,i.eW)("？",-1))]),t[10]||(t[10]=(0,i.Lk)("div",{class:"icheck-info",style:{position:"relative"}},[(0,i.Lk)("input",{type:"checkbox",id:"checkdelfiles"}),(0,i.Lk)("label",{class:"language paneldelcheckboxlabel",for:"checkdelfiles"},"同时删除分组下媒体文件")],-1))])]),(0,i.Lk)("div",O,[(0,i.Lk)("button",{class:"language PanelDelGroupCancellabel dialog-btn dialog_cancel",onClick:t[1]||(t[1]=e=>oe())},"取消"),(0,i.Lk)("button",{class:"language PanelDelGroupSurelabel dialog-btn dialog_sure",onClick:t[2]||(t[2]=e=>le())},"确定")])])],2),(0,i.Lk)("div",{ref_key:"addgroupitempanel",ref:K,class:(0,a.C4)(["panel",{hidden:0==x.value&&0==q.value}]),style:(0,a.Tr)([A.value,{position:"absolute",left:"0",top:"0",width:"100%",height:"100%","background-color":"rgba(0, 0, 0, 0.027)","z-index":"2"}])},[(0,i.Lk)("div",C,[t[13]||(t[13]=(0,i.Lk)("div",{class:"paneltitle",style:{width:"100%","text-align":"center",height:"6.5vh","line-height":"6.5vh","font-size":"2.3vh"}},"分组标题 ",-1)),(0,i.Lk)("div",T,[(0,i.Lk)("input",{class:"groupnameinputlabel panel_value form-control",name:"panel_value",maxlength:"10",type:"text",placeholder:"分组名称",onCompositionstart:M,onCompositionend:N,onCompositionupdate:J,onKeydown:t[4]||(t[4]=(...t)=>e.KeyDown&&e.KeyDown(...t)),onInput:H},null,32)]),(0,i.Lk)("div",{style:{width:"80%","text-align":"center",height:"7vh","line-height":"7vh","font-size":"1.9vh","margin-left":"10%","margin-top":"5vh"}},[(0,i.Lk)("a",{href:"#",class:"panelsettinglabel panel_setting button button-rounded button-primary",style:{float:"left",width:"40%"},onClick:se},"设置"),(0,i.Lk)("a",{href:"#",class:"panelcancellabel panel_cancel button button-rounded button-caution",style:{float:"right",width:"40%"},onClick:ce},"取消")])])],6)],2)],64))}},q=l(71241);const K=(0,q.A)(x,[["__scopeId","data-v-df39c280"]]);var M=K;l(70523),l(17945),l(85044),l(83779),l(38220),l(95956),l(22280),l(1563),l(55668);(0,n.Ef)(M).mount("#app")}},t={};function l(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,l),o.loaded=!0,o.exports}l.m=e,function(){var e=[];l.O=function(t,n,i,o){if(!n){var a=1/0;for(c=0;c<e.length;c++){n=e[c][0],i=e[c][1],o=e[c][2];for(var u=!0,r=0;r<n.length;r++)(!1&o||a>=o)&&Object.keys(l.O).every(function(e){return l.O[e](n[r])})?n.splice(r--,1):(u=!1,o<a&&(a=o));if(u){e.splice(c--,1);var s=i();void 0!==s&&(t=s)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,i,o]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){l.j=971}(),function(){l.p=""}(),function(){var e={971:0};l.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,o,a=n[0],u=n[1],r=n[2],s=0;if(a.some(function(t){return 0!==e[t]})){for(i in u)l.o(u,i)&&(l.m[i]=u[i]);if(r)var c=r(l)}for(t&&t(n);s<a.length;s++)o=a[s],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(c)},n=self["webpackChunkwww"]=self["webpackChunkwww"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=l.O(void 0,[504,996],function(){return l(50549)});n=l.O(n)})();