(function(){"use strict";var e={12727:function(e,t,i){e.exports=i.p+"img/group.91a01b6f.png"},36376:function(e,t,i){var l=i(45130),n=(i(44114),i(18111),i(22489),i(33110),i(58335),i(56768)),s=i(24232),o=i(90144),a=i(88636),r=i(89231),u=i(59048),d=i(92820),c=i(24073),h=i(65943);const v={class:"MediaFlowMain"},f=["src"],g=["onClick"],p={key:0,class:"itemselect",style:{width:"20px",height:"20px",position:"absolute",right:"0","margin-right":"5px"}},m=["src"],y=["src"],w=["src"],k={class:"picinfo",style:{width:"100%",height:"3vh","background-color":"#ffffff",position:"relative"}},b={key:0,class:"videoinfo",style:{width:"65%",height:"100%",position:"relative",display:"flex","align-items":"center"}},x={style:{width:"1.5vh",height:"1.5vh"}},L=["src"],S=["innerHTML"],O=["innerHTML"],C={key:1,class:"shikuang canclick",style:{position:"absolute",left:"0.5vh",top:"0.5vh",width:"3vh",height:"3vh","z-index":"2"}},J=["src"],H={key:2,class:"pinned",style:{position:"absolute",right:"0.5vh",top:"0.5vh",width:"3vh",height:"3vh","z-index":"2"}},T=["src"],E={key:0,class:"finishcontent",style:{width:"100%",height:"4vh"}},M={style:{"vertical-align":"middle","text-align":"center","padding-left":"10px","padding-right":"10px"}},N=["innerHTML"],j={style:{width:"30%",height:"100%",display:"flex","align-items":"center"}},z=["src"],R={style:{width:"40%",height:"100%",display:"flex","align-items":"center"}},G=["src"],I={style:{width:"30%",height:"100%",display:"flex","align-items":"center","justify-content":"flex-end"}},_=["src"],K=20;var X={__name:"App",setup(e){const t=()=>{let e="";for(let t=0;t<ke.value.length;++t)1==ke.value[t]["select"]&&(e+=ke.value[t].id,e+="&");0!=e.length&&(e=e.substring(0,e.length-1),u.f.device.setitemsgroup(e))};let l=[],X=0,Q=0;const q=()=>{let e={};e["year"]=se,e["month"]=oe,e["day"]=ae,e["addr"]=re,e["gid"]=ue,e["piccount"]=Q,e["videocount"]=X,u.f.device.removeitems(JSON.stringify(e))},A=()=>{l=[],X=0,Q=0;for(let e=0;e<ke.value.length;++e)1==ke.value[e]["select"]&&l.push(ke.value[e]);0!=l.length&&ShowConfirm((0,d.yk)("确认"),(0,d.yk)("删除后将永远丢失该媒体的存储,请确认!"),1,(0,d.yk)("按钮确定"),function(){SetToast((0,d.yk)("剩余:")+l.length),P()},(0,d.yk)("按钮取消"),function(){})},F=(0,n.EW)(()=>ke.value.filter(e=>1==e.needshow)),P=()=>{if(0==l.length)return Toast((0,d.yk)("删除成功")),q(),void V();let e=l.pop(),t={action:"delmediaitem"};t["id"]=e.id;let i=e.mtype;u.o.request.delmediaitem(JSON.stringify(t),function(n,s,o){var a=JSON.parse(n);1==a["status"]?(1==i?Q++:X++,SetToast((0,d.yk)("剩余:")+l.length),window.HideItem(e.id),P()):(Toast((0,d.yk)("删除失败")),console.log(JSON.stringify(t)),console.log(n),q())},function(e,t){Toast((0,d.yk)("删除失败")),q()})},B=()=>{let e=0;for(let t=0;t<ke.value.length;++t)1==ke.value[t].needshow&&e++;return(0,d.yk)("总数量")+"( "+e+" )"},D=(0,o.KR)(null),W=()=>{U.value=!0},U=(0,o.KR)(!1),V=()=>{U.value=!1;for(let e=0;e<ke.value.length;++e)ke.value[e]["select"]=!1;D.value.LeaveSelectMode()},Y=e=>{1==U.value?e["select"]=!e["select"]:u.f.device.itemdetail(e.id+"")},Z=e=>(0,r.I)(e.maddr),$=e=>(0,r._D)(e.dur),ee=e=>(0,r.yi)(e.msize),te=(0,o.KR)(0),ie=e=>{var t=te.value/3;let i=t/e.w*1*e.h;return i+"px"},le=(0,h.A)(()=>{te.value=D.value.GetWidth()},400);window.addEventListener("resize",le);let ne="recent",se=0,oe=0,ae=0,re="",ue=0;const de=()=>{ne=(0,r.JG)("type"),null==ne&&(ne="recent"),se=(0,r.JG)("year"),se=null==se?0:parseInt(se),oe=(0,r.JG)("month"),oe=null==oe?0:parseInt(oe),ae=(0,r.JG)("day"),ae=null==ae?0:parseInt(ae),re=decodeURI((0,r.JG)("addr")),"null"==re&&(re=""),ue=(0,r.JG)("gid"),ue=null==ue?0:parseInt(ue)},ce=(e,t)=>{const i=t.elements().viewport;let l=i.clientHeight,n=i.scrollTop;const s=i.scrollHeight-i.clientHeight;1!=ye.value?s-n<l/3&&0==me.value&&xe():ve()},he=(0,o.KR)(!1),ve=()=>{const e=D.value.GetScrollBar().elements().viewport;return e.clientHeight<e.scrollHeight?(he.value=!0,!0):(he.value=!1,!1)},fe=(0,o.KR)(!0),ge=()=>{if(ve(),0==ye.value){const e=D.value.GetScrollBar().elements().viewport;if(e.clientHeight==e.scrollHeight)return void xe()}else 1==ye.value&&(fe.value=1!=pe())},pe=()=>{let e=!0;for(let t=0;t<ke.value.length;++t)if(1==ke.value[t]["needshow"]){e=!1;break}return 1==e?1==fe.value&&(fe.value=!1,U.value=!1,u.f.device.dataempty()):0==fe.value&&(fe.value=!0),e},me=(0,o.KR)(!1),ye=(0,o.KR)(!1),we=()=>{let e=0;for(let t=0;t<ke.value.length;++t)1==ke.value[t]["needshow"]&&e++;return e},ke=(0,o.KR)([]),be=e=>{if(0!=e.length){for(let t=0;t<e.length;++t){let i={};i["dur"]=e[t]["dur"],i["h"]=e[t]["h"],i["w"]=e[t]["w"],i["hasextra"]=e[t]["hasextra"],i["id"]=e[t]["id"],i["maddr"]=e[t]["maddr"],i["msize"]=e[t]["msize"],i["mtype"]=e[t]["mtype"],i["pinnedtime"]=e[t]["pinnedtime"],i["needshow"]=!0,i["select"]=!1,ke.value.push(i)}me.value=!1}else me.value=!1},xe=()=>{if(me.value=!0,"recent"==ne){let e={action:"recentupload"};e["start"]=we(),e["limit"]=K,e["devnames"]=(0,r.sL)(),u.o.request.recentupload(JSON.stringify(e),function(e,t,i){let l=JSON.parse(e);1==l["status"]&&0==l["items"].length&&(me.value=!1,ye.value=!0,pe(),ve()),0!=l["status"]?be(l["items"]):me.value=!1},function(e,t){me.value=!1})}else if("favorite"==ne){let e={action:"favorite"};e["start"]=we(),e["limit"]=K,e["devnames"]=(0,r.sL)(),u.o.request.favorite(JSON.stringify(e),function(e,t,i){let l=JSON.parse(e);1==l["status"]&&0==l["items"].length&&(me.value=!1,ye.value=!0,pe(),ve()),0!=l["status"]?be(l["items"]):me.value=!1},function(e,t){me.value=!1})}else if("group"==ne){let e={action:"groupitemlist"};e["start"]=we(),e["limit"]=K,e["gid"]=ue,e["devnames"]=(0,r.sL)(),u.o.request.groupitemlist(JSON.stringify(e),function(e,t,i){let l=JSON.parse(e);1==l["status"]&&0==l["items"].length&&(me.value=!1,ye.value=!0,pe(),ve()),0!=l["status"]?be(l["items"]):me.value=!1},function(e,t){me.value=!1})}else{if("location"!=ne){let e={action:"yearitemlist"};return e["year"]=se,e["start"]=we(),e["limit"]=K,e["devnames"]=(0,r.sL)(),e["location"]=re,e["month"]=oe,e["day"]=ae,void u.o.request.yearitemlist(JSON.stringify(e),function(e,t,i){let l=JSON.parse(e);1==l["status"]&&0==l["items"].length&&(me.value=!1,ye.value=!0,pe(),ve()),0!=l["status"]?be(l["items"]):me.value=!1},function(e,t){me.value=!1})}{let e={action:"locationitemlist"};e["year"]=se,e["start"]=we(),e["limit"]=K,e["devnames"]=(0,r.sL)(),e["location"]=re,e["month"]=oe,e["day"]=ae,e["devnames"]=(0,r.sL)(),u.o.request.locationitemlist(JSON.stringify(e),function(e,t,i){let l=JSON.parse(e);1==l["status"]&&0==l["items"].length&&(me.value=!1,ye.value=!0,pe(),ve()),0!=l["status"]?be(l["items"]):me.value=!1},function(e,t){me.value=!1})}}};return(0,n.sV)(()=>{window.EnterSelectMode=()=>{U.value=!0},window.DisableSelectMode=()=>{U.value=!1},window.ShowItem=e=>{for(let t=0;t<ke.value.length;++t)if(ke.value[t]["id"]==e){ke.value[t]["needshow"]=!0;break}pe(),ve()},window.HideItem=e=>{for(let t=0;t<ke.value.length;++t)if(ke.value[t]["id"]==e){ke.value[t]["needshow"]=!1;break}pe(),ve()}}),(0,n.dY)(()=>{(0,r.RA)(),le(),de(),(0,c.rH)(function(){xe()})}),(e,l)=>((0,n.uX)(),(0,n.CE)("div",v,[(0,n.Lk)("div",{class:(0,s.C4)(["nodatadiv",{hidden:1==fe.value}]),style:{position:"absolute","text-align":"center",width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[(0,n.Lk)("img",{src:i(10829),style:{width:"10vh",height:"10vh"}},null,8,f)],2),(0,n.Lk)("div",{class:(0,s.C4)({hidden:0==fe.value}),style:{width:"100%",height:"100%",position:"relative"}},[(0,n.bF)(a.A,{ref_key:"mediaflow",ref:D,style:{width:"100%",height:"100%"},flowdata:F.value,onEnterselectmode:W,onHandlescroll:ce,onLayoutend:ge},{content:(0,n.k6)(({item:e})=>[(0,n.Lk)("div",{class:(0,s.C4)(["grid-itemmedia grid-item canclick",{hidden:0==e.needshow}]),style:{position:"relative",padding:"0.3vh",overflow:"hidden","box-sizing":"border-box"},onClick:t=>Y(e)},[1==U.value?((0,n.uX)(),(0,n.CE)("div",p,[1==e.select?((0,n.uX)(),(0,n.CE)("img",{key:0,class:"itemselectpic",src:i(81120),style:{width:"100%",height:"100%"}},null,8,m)):(0,n.Q3)("",!0),0==e.select?((0,n.uX)(),(0,n.CE)("img",{key:1,class:"itemselectpic",src:i(48463),style:{width:"100%",height:"100%"}},null,8,y)):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:"imgdiv",style:(0,s.Tr)([{width:"100%",height:"300px"},{height:ie(e)}])},[(0,n.Lk)("img",{class:"mediapic",style:{width:"100%",height:"100%"},src:Z(e)},null,8,w)],4),(0,n.Lk)("div",k,[2==e.mtype?((0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("div",x,[(0,n.Lk)("img",{style:{position:"absolute",width:"1.5vh",height:"1.5vh"},src:i(12623)},null,8,L)]),(0,n.Lk)("div",{class:"videoduration",style:{"margin-left":"0.5vh","font-size":"1rem",color:"#6F87A8"},innerHTML:$(e)},null,8,S)])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:"filesize",style:{position:"absolute",right:"0",top:"0",width:"35%",height:"100%","font-size":"1rem","line-height":"3vh",color:"#6F87A8","text-align":"right"},innerHTML:ee(e)},null,8,O)]),0!=e.hasextra?((0,n.uX)(),(0,n.CE)("div",C,[(0,n.Lk)("img",{src:i(87426),width:"100%",height:"100%"},null,8,J)])):(0,n.Q3)("",!0),void 0!==e.pinnedtime&&0!=e.pinnedtime&&0==U.value?((0,n.uX)(),(0,n.CE)("div",H,[(0,n.Lk)("img",{src:i(46734),width:"100%",height:"100%",style:{opacity:"0.8",filter:"drop-shadow(2px 2px 4px rgba(0,0,0,0.3)) drop-shadow(-2px -2px 4px rgba(255,255,255,0.5))"}},null,8,T)])):(0,n.Q3)("",!0)],10,g)]),foot:(0,n.k6)(()=>[1==he.value?((0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("div",M,[l[3]||(l[3]=(0,n.Lk)("div",{style:{background:"linear-gradient(to left,#efefef, #ddd,#efefef)",height:"1px"}},null,-1)),(0,n.Lk)("div",{class:"finishcontenttongji",style:{color:"#ccc"},innerHTML:B()},null,8,N)])])):(0,n.Q3)("",!0)]),_:1},8,["flowdata"])],2),(0,n.Lk)("div",{class:(0,s.C4)(["selectbottom",{hidden:0==U.value}]),style:{"background-color":"rgba(255, 255, 255, 0.9)",width:"100%",height:"7vh",bottom:"0",position:"fixed","box-shadow":"0 -5px 15px  #d0d2d3",display:"flex"}},[(0,n.Lk)("div",j,[(0,n.Lk)("div",{onClick:l[0]||(l[0]=e=>V()),style:{display:"block",width:"5vh",height:"4vh",cursor:"pointer"}},[(0,n.Lk)("img",{src:i(87806),width:"100%",height:"100%"},null,8,z)])]),(0,n.Lk)("div",R,[(0,n.Lk)("div",{onClick:l[1]||(l[1]=e=>A()),style:{display:"block",width:"3.4vh",height:"4vh",margin:"0 auto",cursor:"pointer"}},[(0,n.Lk)("img",{src:i(17180),width:"100%",height:"100%"},null,8,G)])]),(0,n.Lk)("div",I,[(0,n.Lk)("div",{onClick:l[2]||(l[2]=e=>t()),style:{display:"block",width:"3.4vh",height:"4vh","margin-right":"1vh",cursor:"pointer"}},[(0,n.Lk)("img",{src:i(12727),width:"100%",height:"100%"},null,8,_)])])],2)]))}};const Q=X;var q=Q;i(70523),i(17945),i(85044),i(83779),i(38220),i(95956),i(22280),i(1563),i(55668);const A=(0,l.Ef)(q);A.mount("#app")}},t={};function i(l){var n=t[l];if(void 0!==n)return n.exports;var s=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=e,function(){var e=[];i.O=function(t,l,n,s){if(!l){var o=1/0;for(d=0;d<e.length;d++){l=e[d][0],n=e[d][1],s=e[d][2];for(var a=!0,r=0;r<l.length;r++)(!1&s||o>=s)&&Object.keys(i.O).every(function(e){return i.O[e](l[r])})?l.splice(r--,1):(a=!1,s<o&&(o=s));if(a){e.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[l,n,s]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var l in t)i.o(t,l)&&!i.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){i.j=357}(),function(){i.p=""}(),function(){var e={357:0};i.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,s,o=l[0],a=l[1],r=l[2],u=0;if(o.some(function(t){return 0!==e[t]})){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(r)var d=r(i)}for(t&&t(l);u<o.length;u++)s=o[u],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(d)},l=self["webpackChunkwww"]=self["webpackChunkwww"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=i.O(void 0,[504,996],function(){return i(36376)});l=i.O(l)})();