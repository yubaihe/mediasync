(function(){"use strict";var e={8201:function(e,t,n){var i=n(45130),o=(n(33110),n(58335),n(56768)),r=n(90144),l=n(24232);n(50635);const a={class:"CommentEditorMain"};var u={__name:"CommentEditor",props:{content:{type:String,required:!0,default:""},isPreview:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=(0,r.KR)(null),i=(0,r.KR)(null),u=e;(0,o.wB)(()=>u.content,(e,t)=>{c.value=e}),(0,o.wB)(()=>u.isPreview,(e,t)=>{s.value=e});const s=(0,r.KR)(u.isPreview),c=(0,r.KR)(u.content),d=(0,r.KR)({modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline"],[{align:[]}],[{color:[]},{background:[]}]]},theme:"Bubble"}),v=(0,r.KR)({modules:{},theme:"Bubble"});(0,o.sV)(()=>{});const f=()=>{s.value=!1},m=()=>{if(s.value=!0,null!=n.value){let e=n.value.getContents();c.value=e}},p=()=>{if(1==s.value){let e=i.value.getText().replace(/<[^>]*>/g,"");return e=e.replace(/\r?\n/g," "),e.trim()}{let e=n.value.getText().replace(/<[^>]*>/g,"");return e=e.replace(/\r?\n/g," "),e.trim()}},g=()=>{if(1==s.value){let e=i.value.getContents();return e}{let e=n.value.getContents();return e}};return t({DisableEdit:m,EnableEdit:f,GetText:p,GetHtml:g}),(e,t)=>{const r=(0,o.g2)("quill-editor");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",{class:(0,l.C4)(["EditorMain",{"preview-mode":s.value}])},[0==s.value?((0,o.uX)(),(0,o.Wv)(r,{key:0,class:"quill-editor",ref_key:"quillEdit",ref:n,options:d.value,theme:"snow","content-type":"html",enable:"",content:c.value},null,8,["options","content"])):(0,o.Q3)("",!0),1==s.value?((0,o.uX)(),(0,o.Wv)(r,{key:1,class:"quill-editor",ref_key:"quillRead",ref:i,"read-only":!0,options:v.value,theme:"snow","content-type":"html",enable:"",content:c.value},null,8,["options","content"])):(0,o.Q3)("",!0)],2)])}}},s=n(71241);const c=(0,s.A)(u,[["__scopeId","data-v-5c15d1d1"]]);var d=c,v=n(59048);const f={class:"CommentEditorMain"};var m={__name:"App",setup(e){const t=(0,r.KR)(null),n=(0,r.KR)("");let i=0,l=0;(0,o.sV)(()=>{window.InitEdit=(e,t)=>{l=e,i=t,0==i?a(l):u(l)},window.EnableEdit=()=>{t.value.EnableEdit()},window.DisableEdit=()=>{t.value.DisableEdit()},window.SaveEdit=()=>{0==i?s():c()}});const a=e=>{let i={action:"getmediacomment"};i["id"]=e,v.o.request.getmediacomment(JSON.stringify(i),function(e,i,o){var r=JSON.parse(e);if(0!=r["status"])if(n.value=r.comment,0==r.commentshort.length){n.value="";let e={prevmode:!1};v.f.device.setmode(JSON.stringify(e)),t.value.EnableEdit()}else{let e={prevmode:!0};v.f.device.setmode(JSON.stringify(e)),t.value.DisableEdit()}})},u=e=>{let i={action:"getmediacommentbackup"};i["id"]=e,v.o.request.getmediacommentbackup(JSON.stringify(i),function(e,i,o){var r=JSON.parse(e);if(0!=r["status"])if(n.value=r.comment,0==r.commentshort.length){n.value="";let e={prevmode:!1};v.f.device.setmode(JSON.stringify(e)),t.value.EnableEdit()}else{let e={prevmode:!0};v.f.device.setmode(JSON.stringify(e)),t.value.DisableEdit()}else Toast(LanguageText("系统错误!"))})},s=()=>{let e=t.value.GetText(),n=t.value.GetHtml();e.length>20&&(e=e.substr(0,20),e+="...");let o={action:"setmediacomment"};o["id"]=l,o["commentshort"]=e,o["comment"]=n,v.o.request.setmediacomment(JSON.stringify(o),function(n,o,r){var a=JSON.parse(n);if(0==a["status"])return void Toast(LanguageText("系统错误!"));t.value.DisableEdit();let u={};u.id=l,u.commentshort=e,u.isback=i,v.f.device.changemedianote(JSON.stringify(u))})},c=()=>{let e=t.value.GetText(),n=t.value.GetHtml();e.length>20&&(e=e.substr(0,20),e+="...");let o={action:"setmediacommentbackup"};o["id"]=l,o["commentshort"]=e,o["comment"]=n,v.o.request.setmediacommentbackup(JSON.stringify(o),function(n,o,r){var a=JSON.parse(n);if(0==a["status"])return void Toast(LanguageText("系统错误!"));t.value.DisableEdit();let u={};u.id=l,u.commentshort=e,u.isback=i,v.f.device.changemedianote(JSON.stringify(u))})};return(0,o.dY)(()=>{}),(e,i)=>((0,o.uX)(),(0,o.CE)("div",f,[(0,o.bF)(d,{ref_key:"commentEditor",ref:t,style:{width:"100%",height:"100%"},content:n.value,isPreview:!0},null,8,["content"])]))}};const p=m;var g=p,b=n(71955);const h=(0,i.Ef)(g);h.component("QuillEditor",b.tB),h.mount("#app")}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,function(){var e=[];n.O=function(t,i,o,r){if(!i){var l=1/0;for(c=0;c<e.length;c++){i=e[c][0],o=e[c][1],r=e[c][2];for(var a=!0,u=0;u<i.length;u++)(!1&r||l>=r)&&Object.keys(n.O).every(function(e){return n.O[e](i[u])})?i.splice(u--,1):(a=!1,r<l&&(l=r));if(a){e.splice(c--,1);var s=o();void 0!==s&&(t=s)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[i,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.j=461}(),function(){n.p=""}(),function(){var e={461:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,r,l=i[0],a=i[1],u=i[2],s=0;if(l.some(function(t){return 0!==e[t]})){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(u)var c=u(n)}for(t&&t(i);s<l.length;s++)r=l[s],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},i=self["webpackChunkwww"]=self["webpackChunkwww"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[504,996],function(){return n(8201)});i=n.O(i)})();