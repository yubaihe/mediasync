(function(){"use strict";var e={78799:function(e,t,i){var n=i(45130),a=(i(33110),i(58335),i(56768)),l=i(24232),o=i(90144),r=i(92820),d=i(59048),s=i(91844),u=(i(50635),i(24073)),c=i(89231),m=i(84820),h=i(11562);const v={key:0,claa:"mediaimage",style:{width:"100%",height:"100%"}},f={style:{width:"100%",height:"100%"}},y={key:1,claa:"mediavideo",style:{width:"100%",height:"100%"}},p={class:"info"},g={class:"mediaitem layout_flex canclick"},k=["innerHTML"],w=["innerHTML"],b={class:"layout-right",style:{"margin-right":"3vh","margin-top":"1.8vh",width:"1.5vh",height:"2.5vh"}},L={class:"mediatimedetail",style:{position:"relative",width:"100%",height:"100%"}},x=["src"],T={class:"mediaitem layout_flex"},S=["innerHTML"],C={key:0,class:"mediaitem chixushijian layout_flex"},O=["innerHTML"],I={class:"mediaitem layout_flex",ref:"fenbianlvconatiner"},E=["innerHTML"],_=["innerHTML"],j={key:0,class:"layout-right",style:{"margin-right":"3vh","margin-top":"1.8vh",width:"1.5vh",height:"2.5vh"}},M={class:"playaddrdetail",style:{position:"relative",width:"100%",height:"100%"}},N=["src"],R={style:{width:"100%",height:"10vh","text-align":"center","margin-top":"2vh"}};var H={__name:"BackupSwipeSlide",props:{item:{type:Object,required:!0,default:()=>({})},autoplayvideo:{type:Boolean,required:!0,default:!1},foldname:{type:String,required:!0,default:""}},emits:["deletemediaitem","videoerror"],setup(e,{expose:t,emit:n}){const H=e,P=(e,t)=>{J("videoerror",e,t)},z=()=>{J("deletemediaitem",H.item)},J=n,G=(0,o.KR)(null);(0,a.wB)(()=>H.autoplayvideo,(e,t)=>{1==H.autoplayvideo?q():V()});const V=()=>{2==H.item.mtype&&G.value.PauseVideo()},q=()=>{2==H.item.mtype&&G.value.PlayVideo()},A=e=>{0!=H.autoplayvideo&&G.value.PlayVideo()},X=e=>(0,c.Nx)(e,H.foldname),F=e=>(0,c.T5)(e,H.foldname),B=e=>(0,c.Nx)(e,H.foldname),D=e=>{if(0==ee(e))return;let t={};t["id"]=e.itemid,t["weizhi"]=e.weizhi,t["location"]=e.location,d.f.device.gpsaddress(JSON.stringify(t))},U=e=>{let t={};t["id"]=e.itemid,d.f.device.choosenote(JSON.stringify(t))},K=e=>""==e.commentshort?(0,r.yk)("暂无"):e.commentshort,Q=e=>e.width+" X "+e.height,W=e=>(0,c.FM)(e.size),Y=e=>e.createtime;let Z=(0,c.CC)();const $=e=>{(0,u.us)(e.itemid,e.weizhi,e.location,(t,i,n)=>{e["location"]=(0,r.yk)(i),e["weizhi"]=(0,r.yk)(n)})},ee=e=>e.location!=(0,r.yk)("未知")&&e.location!=(0,r.yk)("获取中..."),te=(0,o.KR)(null),ie=e=>{let t=te.value.offsetWidth,i=te.value.offsetHeight;if(e.width<t&&e.height<i)return e["containerheight"]=e.height+"px",void(e["containerwidth"]=e.width+"px");let n=1*t/e.width,a=1*i/e.height,l=n>a?a:n;0==l&&(l=n+a),e["containerheight"]=e.height*l+"px",e["containerwidth"]=e.width*l+"px"},ne=()=>2==H.item.mtype?G.value.GetErrorCode():0;return(0,a.dY)(()=>{(0,c.RA)(),(0,r.hC)(),$(H.item),ie(H.item)}),t({InitItemWh:ie,GetVideoErrorCode:ne,PlayVideo:q,StopVideo:V}),(t,n)=>((0,a.uX)(),(0,a.CE)("div",{class:"BackUpSlideItem",ref_key:"mediaplayer",ref:te},[(0,a.bF)((0,o.R1)(s.r),{options:{scrollbars:{autoHide:"scroll",visibility:"visible"}},class:"divmain",style:{width:"100%",height:"100%"}},{default:(0,a.k6)(()=>[(0,a.Lk)("div",{class:"media",style:(0,l.Tr)([{width:"100%",height:"100%"},{height:e.item.containerheight}])},[1==e.item.mtype?((0,a.uX)(),(0,a.CE)("div",v,[(0,a.Lk)("div",f,[(0,a.bF)(h.A,{src:B(e.item.file),imgwidth:e.item.containerwidth,imgheight:e.item.containerheight,style:{width:"100%",height:"100%","text-align":"center",display:"flex","justify-content":"center"}},null,8,["src","imgwidth","imgheight"])])])):((0,a.uX)(),(0,a.CE)("div",y,[(0,a.bF)(m.A,{ref_key:"videoPlayer",ref:G,src:X(e.item.file),poster:F(e.item.file),onCanPlayThrough:A,onPlayError:P,autoplay:e.autoplayvideo,tag:e.item,style:{width:"100%",height:"100%"}},null,8,["src","poster","autoplay","tag"])]))],4),(0,a.Lk)("div",p,[(0,a.Lk)("div",g,[n[3]||(n[3]=(0,a.Lk)("div",{class:"language layout-left mediaitemtitle mediapaitimelabel"},"拍摄时间:",-1)),(0,a.Lk)("div",{class:"layout-middle paisheshijian",innerHTML:Y(e.item)},null,8,k)]),(0,a.Lk)("div",{class:"mediaitem layout_flex canclick",onClick:n[0]||(n[0]=t=>U(e.item))},[n[4]||(n[4]=(0,a.Lk)("div",{class:"language layout-left mediaitemtitle mediapaitimelabel"},"媒体备注:",-1)),(0,a.Lk)("div",{class:"layout-middle paisheshijian",innerHTML:K(e.item)},null,8,w),(0,a.Lk)("div",b,[(0,a.Lk)("div",L,[(0,a.Lk)("img",{style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:i(52419)},null,8,x)])])]),(0,a.Lk)("div",T,[n[5]||(n[5]=(0,a.Lk)("div",{class:"language layout-left mediaitemtitle mediasizelabel"},"媒体大小:",-1)),(0,a.Lk)("div",{class:"layout-middle mediaitemsize",innerHTML:W(e.item)},null,8,S)]),2==e.item.mtype?((0,a.uX)(),(0,a.CE)("div",C,[n[6]||(n[6]=(0,a.Lk)("div",{class:"language layout-left mediaitemtitle mediadurationlabel"},"持续时间: ",-1)),(0,a.Lk)("div",{class:"layout-middle mediaitemdur",innerHTML:(0,o.R1)(c._D)(e.item.duration)},null,8,O)])):(0,a.Q3)("",!0),(0,a.Lk)("div",I,[n[7]||(n[7]=(0,a.Lk)("div",{class:"language layout-left mediaitemtitle fenbianlvlabel"},"分辨率:",-1)),(0,a.Lk)("div",{class:"layout-middle fenbianlv",innerHTML:Q(e.item)},null,8,E)],512),(0,o.R1)(Z)?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,l.C4)(["mediaitem playaddr layout_flex",{canclick:1==ee(e.item)}]),onClick:n[1]||(n[1]=t=>D(e.item))},[n[8]||(n[8]=(0,a.Lk)("div",{class:"language layout-left mediaitemtitle mediapaiaddrlabel"},"拍摄地点:",-1)),(0,a.Lk)("div",{class:"layout-middle paishedidian",innerHTML:e.item.location},null,8,_),1==ee(e.item)?((0,a.uX)(),(0,a.CE)("div",j,[(0,a.Lk)("div",M,[(0,a.Lk)("img",{style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:i(52419)},null,8,N)])])):(0,a.Q3)("",!0)],2)):(0,a.Q3)("",!0),(0,a.Lk)("div",R,[(0,a.Lk)("div",{class:"language mediaitemdel canclick mediaremovelabel",onClick:n[2]||(n[2]=t=>z(e.item)),style:{width:"20vh",height:"7vh","background-color":"#d9534f",border:"#d43f3a 1px solid",margin:"0 auto","border-radius":"4px",color:"white","font-size":"2.5vh","text-align":"center","line-height":"7vh"}}," 删 除 ")])])]),_:1})],512))}},P=i(71241);const z=(0,P.A)(H,[["__scopeId","data-v-18fd5e44"]]);var J=z,G=i(48319);const V={class:"BackupMeidaPlayerMain"},q=["src"],A={style:{position:"relative",width:"100%",height:"100%",display:"flex","justify-content":"center","align-items":"center"}},X=["src"];var F={__name:"App",setup(e){const t=(e,t)=>{s.value.BindInstance(e,t)},n=(e,t)=>{let i=s.value.GetCurItem();e.itemid==i.itemid&&window.ToastError((0,r.yk)("播放错误,错误码: ")+t)},s=(0,o.KR)(null),u=(0,o.KR)(!0),m=e=>{d.f.device.backupswitchitem(JSON.stringify(e)),s.value.EnumInstance(t=>{e.itemid==t.itemid?(t.autoplayvideo=!0,setTimeout(()=>{let t=s.value.GetInstance(e.itemid).GetVideoErrorCode();0!=t&&window.ToastError((0,r.yk)("播放错误,错误码: ")+t)},500)):t.autoplayvideo=!1}),setTimeout(()=>{L()},100)},h=()=>{u.value=!1,d.f.device.backupempty()},v=e=>{let t=Object.hasOwn(e,"cur");if(0==t)return void h();let i=Object.hasOwn(e,"prev"),n=Object.hasOwn(e,"next");e["cur"]["containerheight"]="0px",e["cur"]["containerwidth"]="0px",e["cur"]["paishedizhi"]=(0,r.yk)("获取中..."),e["cur"]["location"]=(0,r.yk)("获取中..."),1==i&&(e["prev"]["containerheight"]="0px",e["prev"]["containerwidth"]="0px",e["prev"]["paishedizhi"]=(0,r.yk)("获取中..."),e["prev"]["location"]=(0,r.yk)("获取中...")),1==n&&(e["next"]["containerheight"]="0px",e["next"]["containerwidth"]="0px",e["next"]["paishedizhi"]=(0,r.yk)("获取中..."),e["next"]["location"]=(0,r.yk)("获取中...")),s.value.AssembleItems(e)};let f=null,y=0;function p(){y=(new Date).getTime();let e=s.value.GetCurItem(),t={action:"synctodeviceprecent"};t["itemid"]=e.itemid,d.o.request.synctodeviceprecent(JSON.stringify(t),function(t,i,n){var a=JSON.parse(t);return y=0,1!=a["status"]?(null!=f&&(clearInterval(f),f=null),Toast((0,r.yk)("同步失败!")),void s.value.Enable()):100==a["precent"]?(null!=f&&(clearInterval(f),f=null),s.value.Enable(),"media exist"!=a["error"]&&d.f.device.backupfilesync(e.itemid+""),void Toast((0,r.yk)("同步成功!"))):void SetToast((0,r.yk)("正在同步:")+a["precent"]+"%")},function(e,t){y=0,UnSetToast(),Toast((0,r.yk)("同步失败!")),s.value.Enable()})}function g(){s.value.Disable(),ShowConfirm((0,r.yk)("确认"),(0,r.yk)("请确认是否需要同步到设备？"),1,(0,r.yk)("按钮确定"),function(){let e=s.value.GetCurItem(),t={action:"synctodevice"};t["itemid"]=e.itemid,d.o.request.synctodevice(JSON.stringify(t),function(e,t,i){var n=JSON.parse(e);if(1!=n["status"])return s.value.Enable(),void Toast((0,r.yk)("同步失败!"));null!=f&&(clearInterval(f),f=null),SetToast((0,r.yk)("正在同步:")+n["precent"]+"%"),f=setInterval(()=>{0!=y&&(new Date).getTime()-y<5e3||p()})},function(e,t){UnSetToast(),Toast((0,r.yk)("同步失败!")),s.value.Enable()})},(0,r.yk)("按钮取消"),function(){s.value.Enable(),UnSetToast()})}const k=e=>{s.value.Disable(),s.value.GetInstance(e.itemid).StopVideo(),ShowConfirm((0,r.yk)("确认"),(0,r.yk)("删除后将永远丢失该媒体的存储,请确认!"),1,(0,r.yk)("按钮确定"),function(){let t={action:"backupuploaditemdel"};t["itemid"]=parseInt(e.itemid),d.o.request.backupuploaditemdel(JSON.stringify(t),function(t,i,n){s.value.Enable();var a=JSON.parse(t);1==a["status"]?(d.f.device.backupdeleteitem(e.itemid+""),s.value.RemoveCurSel()):Toast((0,r.yk)("系统错误!"))},function(e,t){s.value.Enable()})},(0,r.yk)("按钮取消"),function(){UnSetToast(),s.value.GetInstance(e.itemid).PlayVideo(),s.value.Enable()})};let w=0;const b=e=>{let t={action:"backupfolditemdetail"};t["itemid"]=e,d.o.request.diskitemdetail(JSON.stringify(t),function(e,t,i){w=0;var n=JSON.parse(e);v(n)},function(t,i){3!=w&&setTimeout(()=>{w++,b(e)},500)})},L=()=>{let e=s.value.GetCurItem();s.value.GetInstance(e.itemid).InitItemWh(e)};(0,a.xo)(()=>{window.removeEventListener("resize",L)});let x=(0,o.KR)("");return(0,a.sV)(()=>{window.addEventListener("resize",L),window.InitSwiper=(e,t)=>{x.value=t,b(e)},window.RefreshCurItem=()=>{let e=s.value.GetCurItem();if(null==e)return;let t={action:"backupfolditemdetail"};t["itemid"]=e.itemid,d.o.request.diskitemdetail(JSON.stringify(t),function(t,i,n){var a=JSON.parse(t);let l=e;l["commentshort"]=a.cur.commentshort,s.value.UpdateCurItem(l)},function(){})}}),(0,a.dY)(()=>{(0,c.RA)()}),(e,r)=>((0,a.uX)(),(0,a.CE)("div",V,[(0,a.Lk)("div",{class:(0,l.C4)(["nodatadiv",{hidden:1==u.value}]),style:{position:"absolute","text-align":"center",width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[(0,a.Lk)("img",{src:i(10829),style:{width:"10vh",height:"10vh"}},null,8,q)],2),(0,a.bF)(G.A,{class:(0,l.C4)({hidden:0==u.value}),ref_key:"swipewraper",ref:s,style:{width:"100%",height:"100%",position:"relative"},onRequestItem:b,onItemSelect:m,onRemoveCurSel:k,onEmpty:h},{content:(0,a.k6)(({item:e})=>[(0,a.bF)(J,{style:{width:"100%",height:"100%"},item:e,autoplayvideo:e.autoplayvideo,foldname:(0,o.R1)(x),onDeletemediaitem:k,ref:i=>t(i,e.itemid),onVideoerror:n},null,8,["item","autoplayvideo","foldname"])]),_:1},8,["class"]),(0,a.Lk)("div",{class:(0,l.C4)(["ShowIgnorePage",{hidden:0==u.value}]),onClick:r[0]||(r[0]=e=>g())},[(0,a.Lk)("div",A,[(0,a.Lk)("img",{src:i(85886),style:{width:"4vh",height:"3.8vh"}},null,8,X)])],2)]))}};const B=(0,P.A)(F,[["__scopeId","data-v-29c3df9c"]]);var D=B;i(70523),i(17945),i(85044),i(83779),i(38220),i(95956),i(22280),i(1563),i(55668);(0,n.Ef)(D).mount("#app")},85886:function(e,t,i){e.exports=i.p+"img/tosync.524d36b3.png"}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var l=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(l.exports,l,l.exports,i),l.loaded=!0,l.exports}i.m=e,function(){var e=[];i.O=function(t,n,a,l){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],l=e[u][2];for(var r=!0,d=0;d<n.length;d++)(!1&l||o>=l)&&Object.keys(i.O).every(function(e){return i.O[e](n[d])})?n.splice(d--,1):(r=!1,l<o&&(o=l));if(r){e.splice(u--,1);var s=a();void 0!==s&&(t=s)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,a,l]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){i.j=828}(),function(){i.p=""}(),function(){var e={828:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,l,o=n[0],r=n[1],d=n[2],s=0;if(o.some(function(t){return 0!==e[t]})){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(d)var u=d(i)}for(t&&t(n);s<o.length;s++)l=o[s],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(u)},n=self["webpackChunkwww"]=self["webpackChunkwww"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504,996],function(){return i(78799)});n=i.O(n)})();