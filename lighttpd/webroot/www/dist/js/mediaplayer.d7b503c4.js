(function(){"use strict";var e={4700:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAYAAACdz7SqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGBWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4ZjZhOGYyZC0xNzhiLWFhNGMtYjczYy00NjI5OWUwZGVhMGMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEZDQkQ4RTNCQ0Y3MTFFNjlEMjlGNDQ3NkUxNUZEMEMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjExY2QxYmMtNDE2Zi05YTQ1LTlkNjYtMDZjNDY1ODEzNTY0IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDQtMTFUMTE6NDY6MTcrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTA0LTExVDEyOjE2OjA0KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA0LTExVDEyOjE2OjA0KzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDc0YjU4YzUtOTZkMS1hMTRjLTlhMmYtNzlkZjRiYWRkMmJhIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MDgzNWE3ZTEtOTFlOS0xMWU2LWE2YWEtOTUxYzNlZWU1NzczIi8+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjIxMWNkMWJjLTQxNmYtOWE0NS05ZDY2LTA2YzQ2NTgxMzU2NCIgc3RFdnQ6d2hlbj0iMjAyMC0wNC0xMVQxMjoxNjowNCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmNyGeIAAALtSURBVEiJxddfSBRBHAfw787sed6pV2Km4B8yH5QkSSSjsB68IEUIsyILszI0RAwiIdNEKw01/4VFhxD90QTJ4LgXqYfAqIejlzK4h8DEBCkj8w/enuvNTA9pef5dw7t+L8vO/Ph9dpbZmR1JCAFfhzQRnOLR4He/JB99fQfJlDNAEhIXghOhI5xHRgzT3DyLa1++Y2G+/7vOWNb5sFgaHI4hbk4kSFyAE24KmJbS0npnCls7Fuabxux/UUP/syh2o7qROlU/AFnLP6OwscQd/WqdrdL47Q1xtzZcpx8ciYB0eIVBWVmgXqXXqkqVxOPDHqjh4/MIXl52l7CVMM9C7ojQUUkAdOR7oYZ8cAorqasvUhKyv/5B/XJ2dtFJ10ktBf412OaAp2rX+1zTmB1E31GeTSddBm+CAEDHpwP03dWZAEArtgQ7iDIT720UQDwf+TIrp2daifRzwgfe75B+jAcDACFc8hlK+NzVZyIAQOIAQAS4z0gBTgCAcKPeZyg36lUAIIiP8xmK+DgHABB6LGcbIGzeF4WNHjn+CACIsuvEEAsPGfU2ycJDRpXkU4PA3OwlRSV1woujFRA2WnKpZv6eAIBrd+4A35NsB2D1gmnl+/e+VpJyhjxQAFCrum+xkKCpjRZZ6KYJ9WpH08I2j8VBrr19gRl0PRsGGnU9ck1D0eJ2D9QZbVZoQ1PBRsDMIPfQ+qYCZ1SasioKAEpsxrjc0pbHggM7FvdpBo26HtrQXKDEZowv17/s2uuMNityc9tZd+RWC9Y5uViI6bHc3Ja3ErgiCgDOsFQ+2/62iCUl9GuErSwupkluvJPvjDYveaWa0PlQa61VLN3cu9p3LCBszHzgldrystQZlrrmDqJpa1MvWtrF+TMWAb4EFuA2cS7Pol5+0KalFgDIWhNnjlb2+tufDLDaGk7dIgsAmE6ykorqKzMppz9prQMs87O9Vhg+vwhilWX3AIDerCtWth9a14JiGrND+h/Hil+mDyO50tvhhgAAAABJRU5ErkJggg=="},10593:function(e,i,t){e.exports=t.p+"img/pinnedselected.991705ab.png"},25327:function(e,i,t){e.exports=t.p+"img/nopinned.b6eca887.png"},27212:function(e,i,t){var a=t(45130),l=(t(33110),t(58335),t(56768)),n=t(24232),o=t(90144),r=t(89231),d=t(92820),s=t(59048),c=t(48319),u=t(91844),m=(t(50635),t(24073)),h=t(84820),v=t(11562),g=t(79620);const y={key:0,claa:"mediaimage",style:{width:"100%",height:"100%"}},p={key:0,style:{width:"100%",height:"100%"}},f={class:"imghasextra canclick",style:{position:"absolute","z-index":"100",width:"30px",height:"30px"}},k=["src"],A={class:"liveImagePlayer",style:{position:"absolute",width:"100%",height:"100%"}},I={key:1,claa:"mediavideo",style:{width:"100%",height:"100%"}},w={class:"info"},b=["innerHTML"],L={class:"layout-right",style:{"margin-right":"3vh","margin-top":"1.8vh",width:"1.5vh",height:"2.5vh"}},N={class:"mediatimedetail",style:{position:"relative",width:"100%",height:"100%"}},M=["src"],S=["innerHTML"],E={class:"layout-right",style:{"margin-right":"3vh","margin-top":"1.8vh",width:"1.5vh",height:"2.5vh"}},O={class:"mediatimedetail",style:{position:"relative",width:"100%",height:"100%"}},R=["src"],T={class:"mediaitem shebeimingcheng layout_flex"},j=["innerHTML"],G={class:"layout-right",style:{"margin-right":"2.3vh","margin-top":"1.5vh",width:"3vh",height:"3vh"}},Z=["src"],D=["src"],C={class:"mediaitem layout_flex"},z=["innerHTML"],x={class:"layout-right",style:{"margin-right":"2.3vh","margin-top":"1.5vh",width:"3vh",height:"3vh"}},Y=["src"],W=["src"],J={class:"mediaitem layout_flex",ref:"fenbianlvconatiner"},B=["innerHTML"],U={class:"layout-right",style:{"margin-right":"2.3vh","margin-top":"1.5vh",width:"3vh",height:"3vh"}},V=["src"],P=["src"],X=["innerHTML"],H={class:"layout-right",style:{"margin-right":"3vh","margin-top":"1.8vh",width:"1.5vh",height:"2.5vh"}},Q={class:"suoshufenzudetail",style:{position:"relative",width:"100%",height:"100%"}},F=["src"],K=["innerHTML"],q={class:"layout-right",style:{"margin-right":"3vh","margin-top":"1.8vh",width:"1.5vh",height:"2.5vh"}},_={class:"playaddrdetail",style:{position:"relative",width:"100%",height:"100%"}},$=["src"],ee={key:1,class:"mediaitem chixushijian layout_flex"},ie=["innerHTML"],te={class:"mediaitem synctime layout_flex"},ae=["innerHTML"],le={style:{width:"100%",height:"10vh","text-align":"center","margin-top":"2vh"}};var ne={__name:"MediaSwipeSlide",props:{item:{type:Object,required:!0,default:()=>({})},autoplayvideo:{type:Boolean,required:!0,default:!1},cover:{type:String,required:!0,default:""},defaultcover:{type:String,required:!0,default:""}},emits:["updategroupinfo","updateitemlocation","deletemediaitem","coverchange","videoerror"],setup(e,{expose:i,emit:a}){const c=e;(0,l.wB)(()=>c.item,(e,i)=>{je(e.itemid)}),(0,l.wB)(()=>c.autoplayvideo,(e,i)=>{1==c.autoplayvideo?ue():ce()}),(0,l.wB)(()=>c.cover,(e,i)=>{e==c.item.maddr?Ge.value=!0:Ge.value=!1});const ne=(e,i)=>{ze("videoerror",e,i)},oe=()=>{},re=e=>{0!=c.autoplayvideo&&he()},de=e=>{0!=c.autoplayvideo&&se.value.PlayVideo()},se=(0,o.KR)(null),ce=()=>{2==c.item.mtype&&se.value.PauseVideo()},ue=()=>{2==c.item.mtype&&se.value.PlayVideo()},me=e=>{1==e.target.classList.contains("imghasextra")&&he()},he=()=>{null!=ve.value&&ve.value.Play()},ve=(0,o.KR)(null),ge=e=>{let i={};i["id"]=e.id,i["weizhi"]=e.weizhi,i["location"]=e.location,s.f.device.gpsaddress(JSON.stringify(i))},ye=e=>{let i={};i["id"]=e.id,i["maddr"]=e.maddr,i["mtype"]=e.mtype,i["device"]=e.device,i["groupids"]=e.selectgroupids,s.f.device.updatefenzu(JSON.stringify(i))};function pe(e){let i={};i["id"]=e.id,i["mtype"]=e.mtype,i["paitime"]=e.paitime,s.f.device.updatetime(JSON.stringify(i))}const fe=e=>{let i={};i["id"]=e.id,s.f.device.choosenote(JSON.stringify(i))},ke=e=>{let i=c.defaultcover;0==Ge.value&&(i=e.maddr);var t={action:"setcover"};t["coveraddr"]=i,s.o.request.setcover(JSON.stringify(t),function(i,t,a){var l=JSON.parse(i);if(1!=l["status"])return void Toast((0,d.yk)("系统错误!"));0==Ge.value?(Toast((0,d.yk)("添加设备封面成功!")),Ge.value=!0):(Toast((0,d.yk)("取消设备封面成功!")),Ge.value=!1);let n={};n["id"]=e.id,n["cover"]=1==Ge.value?1:0,s.f.device.cover(JSON.stringify(n)),ze("coverchange",n)})},Ae=e=>{let i=0==e.pinnedtime?1:0;var t={action:"setmediapinned"};t["id"]=e.id,t["pinned"]=i,s.o.request.setmediapinned(JSON.stringify(t),function(t,a,l){var n=JSON.parse(t);if(1!=n["status"])return void Toast((0,d.yk)("系统错误!"));1==i?(Toast((0,d.yk)("置顶成功!")),e.pinnedtime=Date.now()/1e3):(Toast((0,d.yk)("取消置顶成功!")),e.pinnedtime=0);let o={};o["id"]=e.id,o["pinned"]=i,s.f.device.mediapinchange(JSON.stringify(o))})},Ie=e=>{let i=0==e.favoritetime?1:0;var t={action:"mediafavorite"};t["id"]=e.id,t["favorite"]=i,s.o.request.mediafavorite(JSON.stringify(t),function(t,a,l){var n=JSON.parse(t);if(1!=n["status"])return void Toast((0,d.yk)("系统错误!"));1==i?(Toast((0,d.yk)("添加喜欢成功!")),e.favoritetime=(0,r.nn)()):(Toast((0,d.yk)("取消喜欢成功!")),e.favoritetime=0);let o={};o["id"]=e.id,o["favorite"]=i,s.f.device.favorite(JSON.stringify(o))})},we=e=>e.w+" X "+e.h,be=e=>(0,r.yi)(e.msize),Le=e=>{let i=new Date(1e3*e.addtime);return i.toLocaleString()},Ne=e=>{let i=new Date(1e3*e.paitime),t=i.toLocaleString();return t},Me=e=>""==e.location?(0,d.yk)("未知"):e.location,Se=e=>""==e.commentshort?(0,d.yk)("暂无"):e.commentshort;let Ee=(0,r.CC)();const Oe=e=>{(0,m.us)(e.id,e.weizhi,e.location,(e,i,t)=>{ze("updateitemlocation",e,(0,d.yk)(i),t)})},Re=(0,o.KR)(null),Te=e=>{let i=Re.value.offsetWidth,t=Re.value.offsetHeight;if(1==e.mtype&&1==e.hasextra)return e["containerheight"]=t+"px",void(e["containerwidth"]=i+"px");if(e.width<i&&e.height<t)return e["containerheight"]=e.h+"px",void(e["containerwidth"]=e.w+"px");let a=1*i/e.w,l=1*t/e.h,n=a>l?l:a;0==n&&(n=a+l),n>=.9&&(n=1),e["containerheight"]=e.h*n+"px",e["containerwidth"]=e.w*n+"px"},je=e=>{let i={action:"groupnamesfromitemid"};i["id"]=e,s.o.request.groupnamesfromitemid(JSON.stringify(i),function(i,t,a){let l=JSON.parse(i),n=(0,d.yk)("未分组"),o="";if(1!=l["status"])n=(0,d.yk)("未知");else{l["groups"].length>0&&(n="");for(var r=0;r<l["groups"].length;++r)0==n.length?(n=l["groups"][r].name,o=l["groups"][r].id):(n+="&",n+=l["groups"][r].name,o+="&",o+=l["groups"][r].id)}ze("updategroupinfo",e,n,o)})},Ge=(0,o.KR)(!1),Ze=()=>{c.cover==c.item.maddr?Ge.value=!0:Ge.value=!1},De=e=>{ze("deletemediaitem",e)},Ce=()=>2==c.item.mtype?se.value.GetErrorCode():0,ze=a;return i({StopVideo:ce,PlayVideo:ue,PlayShiKuang:he,InitItemWh:Te,GetVideoErrorCode:Ce}),(0,l.dY)(()=>{(0,r.RA)(),(0,d.hC)(),Oe(c.item),Te(c.item),je(c.item.itemid),Ze()}),(i,a)=>((0,l.uX)(),(0,l.CE)("div",{class:"MediaSlideItem",ref_key:"mediaplayer",ref:Re},[(0,l.bF)((0,o.R1)(u.r),{options:{scrollbars:{autoHide:"scroll",visibility:"visible"}},class:"divmain",style:{width:"100%",height:"100%"}},{default:(0,l.k6)(()=>[(0,l.Lk)("div",{class:"media",style:(0,n.Tr)([{width:"100%",height:"100%"},{height:e.item.containerheight}])},[1==e.item.mtype?((0,l.uX)(),(0,l.CE)("div",y,[0==e.item.hasextra?((0,l.uX)(),(0,l.CE)("div",p,[(0,l.bF)(v.A,{src:(0,o.R1)(r.Dl)(e.item.maddr),imgwidth:e.item.containerwidth,imgheight:e.item.containerheight,style:{width:"100%",height:"100%","text-align":"center",display:"flex","justify-content":"center"}},null,8,["src","imgwidth","imgheight"])])):((0,l.uX)(),(0,l.CE)("div",{key:1,style:{width:"100%",height:"100%"},onClick:me},[(0,l.Lk)("div",f,[(0,l.Lk)("img",{src:t(87426),style:{position:"absolute",width:"100%",height:"100%"}},null,8,k)]),(0,l.Lk)("div",A,[(0,l.bF)(g.A,{ref_key:"liveImagePlayer",ref:ve,tag:e.item,imagesrc:(0,o.R1)(r.Dl)(e.item.maddr),autoplay:e.autoplayvideo,videosrc:(0,o.R1)(r.eO)(e.item.maddr),imgwidth:e.item.containerwidth,imgheight:e.item.containerheight,style:{width:"100%",height:"100%","text-align":"center"},onCanPlayThroughShiKuang:re,onPlayShiKuangEnd:oe},null,8,["tag","imagesrc","autoplay","videosrc","imgwidth","imgheight"])])]))])):((0,l.uX)(),(0,l.CE)("div",I,[(0,l.bF)(h.A,{ref_key:"videoPlayer",ref:se,src:(0,o.R1)(r.qy)(e.item.maddr),poster:(0,o.R1)(r.I)(e.item.maddr),onCanPlayThrough:de,onPlayError:ne,autoplay:e.autoplayvideo,tag:e.item,style:{width:"100%",height:"100%"}},null,8,["src","poster","autoplay","tag"])]))],4),(0,l.Lk)("div",w,[(0,l.Lk)("div",{class:"mediaitem layout_flex canclick",onClick:a[0]||(a[0]=i=>pe(e.item))},[a[8]||(a[8]=(0,l.Lk)("div",{class:"language layout-left mediaitemtitle mediapaitimelabel"},"拍摄时间:",-1)),(0,l.Lk)("div",{class:"layout-middle paisheshijian",innerHTML:Ne(e.item)},null,8,b),(0,l.Lk)("div",L,[(0,l.Lk)("div",N,[(0,l.Lk)("img",{style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:t(52419)},null,8,M)])])]),(0,l.Lk)("div",{class:"mediaitem layout_flex canclick",onClick:a[1]||(a[1]=i=>fe(e.item))},[a[9]||(a[9]=(0,l.Lk)("div",{class:"language layout-left mediaitemtitle mediapaitimelabel"},"媒体备注:",-1)),(0,l.Lk)("div",{class:"layout-middle paisheshijian",innerHTML:Se(e.item)},null,8,S),(0,l.Lk)("div",E,[(0,l.Lk)("div",O,[(0,l.Lk)("img",{style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:t(52419)},null,8,R)])])]),(0,l.Lk)("div",T,[a[10]||(a[10]=(0,l.Lk)("div",{class:"language layout-left mediaitemtitle mediadevicenamelabel"},"设备名称:",-1)),(0,l.Lk)("div",{class:"layout-middle mediaitemname",innerHTML:e.item.device},null,8,j),(0,l.Lk)("div",G,[(0,l.Lk)("div",{class:"favorite canclick",style:{position:"relative",width:"100%",height:"100%"},onClick:a[2]||(a[2]=i=>Ie(e.item))},[0==e.item.favoritetime?((0,l.uX)(),(0,l.CE)("img",{key:0,style:{position:"absolute",width:"100%",scale:"fit",height:"100%"},src:t(30897)},null,8,Z)):((0,l.uX)(),(0,l.CE)("img",{key:1,style:{position:"absolute",width:"100%",scale:"fit",height:"100%"},src:t(4700)},null,8,D))])])]),(0,l.Lk)("div",C,[a[11]||(a[11]=(0,l.Lk)("div",{class:"language layout-left mediaitemtitle mediasizelabel"},"媒体大小:",-1)),(0,l.Lk)("div",{class:"layout-middle mediaitemsize",innerHTML:be(e.item)},null,8,z),(0,l.Lk)("div",x,[(0,l.Lk)("div",{class:"cover canclick",style:{position:"relative",width:"100%",height:"100%"},onClick:a[3]||(a[3]=i=>ke(e.item))},[0==Ge.value?((0,l.uX)(),(0,l.CE)("img",{key:0,style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:t(3680)},null,8,Y)):((0,l.uX)(),(0,l.CE)("img",{key:1,style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:t(11963)},null,8,W))])])]),(0,l.Lk)("div",J,[a[12]||(a[12]=(0,l.Lk)("div",{class:"language layout-left mediaitemtitle fenbianlvlabel"},"分辨率:",-1)),(0,l.Lk)("div",{class:"layout-middle fenbianlv",innerHTML:we(e.item)},null,8,B),(0,l.Lk)("div",U,[(0,l.Lk)("div",{class:"pinned canclick",style:{position:"relative",width:"100%",height:"100%"},onClick:a[4]||(a[4]=i=>Ae(e.item))},[0==e.item.pinnedtime?((0,l.uX)(),(0,l.CE)("img",{key:0,style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:t(25327)},null,8,V)):((0,l.uX)(),(0,l.CE)("img",{key:1,style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:t(10593)},null,8,P))])])],512),(0,l.Lk)("div",{class:"mediaitem suoshufenzu layout_flex canclick",onClick:a[5]||(a[5]=i=>ye(e.item))},[a[13]||(a[13]=(0,l.Lk)("div",{class:"language layout-left mediaitemtitle mediagrouplabel"},"所属分组:",-1)),(0,l.Lk)("div",{class:"layout-middle suoshufenzuvalue",innerHTML:e.item.groupnames},null,8,X),(0,l.Lk)("div",H,[(0,l.Lk)("div",Q,[(0,l.Lk)("img",{style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:t(52419)},null,8,F)])])]),(0,o.R1)(Ee)?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"mediaitem playaddr layout_flex canclick",onClick:a[6]||(a[6]=i=>ge(e.item))},[a[14]||(a[14]=(0,l.Lk)("div",{class:"language layout-left mediaitemtitle mediapaiaddrlabel"},"拍摄地点:",-1)),(0,l.Lk)("div",{class:"layout-middle paishedidian",innerHTML:Me(e.item)},null,8,K),(0,l.Lk)("div",q,[(0,l.Lk)("div",_,[(0,l.Lk)("img",{style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:t(52419)},null,8,$)])])])):(0,l.Q3)("",!0),2==e.item.mtype?((0,l.uX)(),(0,l.CE)("div",ee,[a[15]||(a[15]=(0,l.Lk)("div",{class:"language layout-left mediaitemtitle mediadurationlabel"},"持续时间:",-1)),(0,l.Lk)("div",{class:"layout-middle mediaitemdur",innerHTML:(0,o.R1)(r._D)(e.item.dur)},null,8,ie)])):(0,l.Q3)("",!0),(0,l.Lk)("div",te,[a[16]||(a[16]=(0,l.Lk)("div",{class:"language layout-left mediaitemtitle mediasynctimelabel"},"同步时间:",-1)),(0,l.Lk)("div",{class:"layout-middle mediaitemsynctime",innerHTML:Le(e.item)},null,8,ae)]),(0,l.Lk)("div",le,[(0,l.Lk)("div",{class:"language mediaitemdel canclick mediaremovelabel",onClick:a[7]||(a[7]=i=>De(e.item)),style:{width:"20vh",height:"7vh","background-color":"#d9534f",border:"#d43f3a 1px solid",margin:"0 auto","border-radius":"4px",color:"white","font-size":"2.5vh","text-align":"center","line-height":"7vh"}},"删 除")])])]),_:1})],512))}},oe=t(71241);const re=(0,oe.A)(ne,[["__scopeId","data-v-60b50912"]]);var de=re,se=t(26445),ce=t(23772);t(38220);class ue{constructor(){(0,ce.A)(this,"g_transcodetimer",null),(0,ce.A)(this,"g_identify",""),(0,ce.A)(this,"g_callBack",null)}IsTranscodeRunning(){return null!=this.g_transcodetimer}TranscodeStart(e,i){if(null!=this.g_transcodetimer)return;this.g_callBack=i;let t={action:"transfilestart"};t["id"]=e.itemid,s.o.request.transfilestart(JSON.stringify(t),function(e,i,t){var a=JSON.parse(e);1==a.status?(me.g_identify=a.identify,me.GetStatus()):Toast((0,d.yk)("转码失败!"))},function(e,i){})}GetStatus(){this.g_transcodetimer=setInterval(function(){let e={action:"transfileprecent"};e["identify"]=me.g_identify,s.o.request.transfileprecent(JSON.stringify(e),function(e,i,t){var a=JSON.parse(e);if(1==a.status&&0==a.precent&&0==a.cur&&0==a.dur&&(clearInterval(me.g_transcodetimer),me.g_transcodetimer=null,me.g_callBack()),DialogToast((0,d.yk)("视频转码"),(0,d.yk)("{0}% ({1}秒/{2}秒)").format(a.precent,parseInt(a.cur/1e3),parseInt(a.dur/1e3)),(0,d.yk)("取 消"),()=>{let e={action:"transfilestop"};e["identify"]=me.g_identify,s.o.request.transfilestop(JSON.stringify(e),function(e,i,t){Toast((0,d.yk)("转码已取消!")),DialogClose(),clearInterval(me.g_transcodetimer),me.g_transcodetimer=null},function(e,i){})}),1!=a.status)return Toast((0,d.yk)("转码失败!")),clearInterval(me.g_transcodetimer),void(me.g_transcodetimer=null);100==a.precent&&(clearInterval(me.g_transcodetimer),me.g_transcodetimer=null,me.g_callBack())},function(e,i){})},1e3)}}var me=new ue,he=me;const ve={class:"mediaplayer"},ge=["src"];var ye={__name:"App",setup(e){const i=(0,o.KR)(!0),a=(e,i)=>{k.value.BindInstance(e,i)},u=(e,i)=>{let t=k.value.GetCurItem();e.itemid==t.itemid&&v(e,i)},m=()=>{let e=k.value.GetCurItem();k.value.GetInstance(e.id).PlayShiKuang()},h=e=>{let i={action:"gethomecover"};s.o.request.gethomecover(JSON.stringify(i),function(e,i,t){var a=JSON.parse(e);I.value=a.cover},function(){})},v=(e,i)=>{if(4==i){let t={action:"getmime"};t["id"]=e.itemid,s.o.request.getmime(JSON.stringify(t),function(t,a,l){var n=JSON.parse(t);if(1==n.status&&""!=n["mime"]){var o=(0,d.yk)("不支持格式<span style='color:red'>{0}</span>的视频播放，请确认是否需要转码为<span style='color:#1B9AF7'>MP4</span>格式？").format(n["mime"]);ShowConfirm((0,d.yk)("视频转码确认"),o,1,(0,d.yk)("按钮确定"),function(){R(),he.TranscodeStart(e,()=>{location.reload()})},(0,d.yk)("按钮取消"),function(){UnSetToast()})}else window.ToastError((0,d.yk)("播放错误,错误码: ")+i)},function(){window.ToastError((0,d.yk)("播放错误,错误码: ")+i)})}else window.ToastError((0,d.yk)("播放错误,错误码: ")+i)},g=e=>{s.f.device.selectitemchange(JSON.stringify(e)),k.value.EnumInstance(i=>{e.itemid==i.itemid?(i.autoplayvideo=!0,setTimeout(()=>{let i=k.value.GetInstance(e.itemid).GetVideoErrorCode();0!=i&&v(e,i)},500)):i.autoplayvideo=!1}),setTimeout(()=>{T(),m()},100)},y=()=>{i.value=!1,s.f.device.dataempty()},p=(e,i,t)=>{0==i.length&&(i=(0,d.yk)("未分组")),k.value.UpdateGroupInfo(e,i,t)},f=(e,i,t)=>{k.value.UpdateItemLocation(e,i,t)},k=(0,o.KR)(null),A=e=>{k.value.Disable(),k.value.GetInstance(e.id).StopVideo(),ShowConfirm((0,d.yk)("确认"),(0,d.yk)("删除后将永远丢失该媒体的存储,请确认!"),1,(0,d.yk)("按钮确定"),function(){var i={action:"delmediaitem"};i["id"]=e.id,s.o.request.delmediaitem(JSON.stringify(i),function(i,t,a){k.value.Enable();var l=JSON.parse(i);if(1!=l["status"])return void Toast((0,d.yk)("系统错误!"));let n={};n["id"]=e.id,n["mtype"]=e.mtype,n["favorite"]=e.favoritetime>0?1:0,n["paitime"]=e.paitime,n["addtime"]=e.addtime,s.f.device.deleteitem(JSON.stringify(n)),k.value.RemoveCurSel()},function(e,i){k.value.Enable()})},(0,d.yk)("按钮取消"),function(){UnSetToast(),k.value.GetInstance(e.id).PlayVideo(),k.value.Enable()})};let I=(0,o.KR)(""),w=0,b=0,L=0,N="",M="",S=0;const E=e=>{let i={action:"itemdetail"};i["itemid"]=e,i["devnames"]=(0,r.sL)(),i["type"]=M,i["gid"]=S,i["year"]=w,i["month"]=b,i["day"]=L,i["location"]=N,s.o.request.itemdetail(JSON.stringify(i),function(e,i,t){var a=JSON.parse(e);I.value=a.cover,O(a)},function(){window.Toast("请求异常")})},O=e=>{console.log("AssembleItems start");let i=Object.hasOwn(e,"prev");console.log("AssembleItems hasPrev "+i);let t=Object.hasOwn(e,"next");console.log("AssembleItems hasNext "+t),e["cur"]["itemid"]=e["cur"].id,e["cur"]["containerheight"]="0px",e["cur"]["containerwidth"]="0px",e["cur"]["location"]=(0,d.yk)("获取中..."),e["cur"]["groupnames"]=(0,d.yk)("未分组"),1==i&&(e["prev"]["itemid"]=e["prev"].id,e["prev"]["containerheight"]="0px",e["prev"]["containerwidth"]="0px",e["prev"]["location"]=(0,d.yk)("获取中..."),e["prev"]["groupnames"]=(0,d.yk)("未分组")),1==t&&(e["next"]["itemid"]=e["next"].id,e["next"]["containerheight"]="0px",e["next"]["containerwidth"]="0px",e["next"]["paishedizhi"]=(0,d.yk)("获取中..."),e["next"]["location"]=(0,d.yk)("获取中..."),e["next"]["groupnames"]=(0,d.yk)("未分组")),k.value.AssembleItems(e)},R=()=>{let e=k.value.GetCurItem();k.value.GetInstance(e.id).StopVideo()},T=()=>{let e=k.value.GetCurItem();k.value.GetInstance(e.id).InitItemWh(e)};(0,l.xo)(()=>{window.removeEventListener("resize",T)});const j=(0,o.KR)("");return(0,l.sV)(()=>{window.addEventListener("resize",T),window.Release=()=>{R()},window.RefreshCurItem=()=>{let e=k.value.GetCurItem();if(null==e)return;let i={action:"itemdetail"};i["itemid"]=e.id,i["devnames"]="",i["type"]="",i["gid"]=0,i["year"]=0,i["month"]=0,i["day"]=0,i["location"]="",s.o.request.itemdetail(JSON.stringify(i),function(i,t,a){var l=JSON.parse(i);let n=l.cur;n["itemid"]=n.id,n["groupnames"]=e.groupnames,n["containerheight"]=e.containerheight,n["containerwidth"]=e.containerwidth,n["iscover"]=I.value==n["maddr"],k.value.UpdateCurItem(n)},function(){})},window.UpdatePaiSheShiJian=e=>{window.RefreshCurItem()},window.UpdatePaiSheDiDian=(e,i,t)=>{window.RefreshCurItem()},window.StopPlay=()=>{R()},window.InitItem=(e,i,t,a,l)=>{j.value=e,M=i,S=a,N=l;let n={action:"itemdetail"};n["itemid"]=t,n["devnames"]="",n["type"]="",n["gid"]=0,n["year"]=0,n["month"]=0,n["day"]=0,n["location"]="",s.o.request.itemdetail(JSON.stringify(n),function(e,i,t){var a=JSON.parse(e);if(1!=a["status"])return;let l=a.cur;var n=new Date(1e3*l.paitime);"recent"==M||"favorite"==M||"group"==M||("year"==M?w=n.getFullYear():"month"==M?(w=n.getFullYear(),b=n.getMonth()+1):"day"==M&&(w=n.getFullYear(),b=n.getMonth()+1,L=n.getDate())),E(l.id)})}}),(0,l.dY)(()=>{(0,r.RA)(),(0,d.hC)(),(0,se.M8)(300,e=>{m()},()=>{})}),(e,r)=>((0,l.uX)(),(0,l.CE)("div",ve,[(0,l.Lk)("div",{class:(0,n.C4)(["nodatadiv",{hidden:1==i.value}]),style:{position:"absolute","text-align":"center",width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[(0,l.Lk)("img",{src:t(10829),style:{width:"10vh",height:"10vh"}},null,8,ge)],2),(0,l.bF)(c.A,{class:(0,n.C4)({hidden:0==i.value}),ref_key:"swipewraper",ref:k,style:{width:"100%",height:"100%",position:"relative"},onRequestItem:E,onItemSelect:g,onRemoveCurSel:A,onEmpty:y},{content:(0,l.k6)(({item:e})=>[(0,l.bF)(de,{style:{width:"100%",height:"100%"},item:e,defaultcover:j.value,cover:(0,o.R1)(I),autoplayvideo:e.autoplayvideo,onDeletemediaitem:A,ref:i=>a(i,e.id),onUpdategroupinfo:p,onUpdateitemlocation:f,onCoverchange:h,onVideoerror:u},null,8,["item","defaultcover","cover","autoplayvideo"])]),_:1},8,["class"])]))}};const pe=ye;var fe=pe;t(70523),t(17945),t(85044),t(83779),t(95956),t(22280),t(1563),t(55668);(0,a.Ef)(fe).mount("#app")},30897:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAYAAACdz7SqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGBWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4ZjZhOGYyZC0xNzhiLWFhNGMtYjczYy00NjI5OWUwZGVhMGMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEZBNzMzM0NCQ0Y3MTFFNjlEMjlGNDQ3NkUxNUZEMEMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YzdjZmI2ZjUtMmJjNy02NDQwLWJjZGUtYThhYWJlZjA1OTNiIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDQtMTFUMTE6NDY6MjcrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTA0LTExVDEyOjE2OjI0KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA0LTExVDEyOjE2OjI0KzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDc0YjU4YzUtOTZkMS1hMTRjLTlhMmYtNzlkZjRiYWRkMmJhIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MDgzNWE3ZTEtOTFlOS0xMWU2LWE2YWEtOTUxYzNlZWU1NzczIi8+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmM3Y2ZiNmY1LTJiYzctNjQ0MC1iY2RlLWE4YWFiZWYwNTkzYiIgc3RFdnQ6d2hlbj0iMjAyMC0wNC0xMVQxMjoxNjoyNCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvkm0U4AAAKlSURBVEiJvdY/TBNRHAfw73vX43rXf9A/hB53OdpKcCDioEYWTAhgF0OMksiErG7QEUY7sxk2EhdJICZGpkY76HAmONjIYIDEaP/AQK/B9iQ9Qs+JBu0fqND7bvfy+73PvXcvL0dM04TVIYddd/4aoD/fRzRNm/yt64PHx8e9AGBj2awgCFudnZ0JEprYqpnkx7tIoVCo9pgAWJbNOh2OLa/Pt3oij+Yaor9S6880TZsEMNHgJRNOp3OzV5Li5eDIEbf3gc9lswvFYvF2sx6vz/fGfePRixo0//nV83Oaq+no6FjplaR4NpNZMAxj9rx6AAmXy7XpuzW9WEWLX1/P5g8OnlwEvEQS/kBg1Tn4cIXoui7u7u6uwDTbCQIACCGJa/390ySTTpv5fL7dXjV+vx9U13XLQAAolUqgZcOwFDUMA9SsVCxFK5UKKKHUUpRQCmrnOEtRO8eBCoJgKSoIAqjb4xkAoFpkqm6PZ4Caytg2z/M7Vog8z++Yytg2BQB/ILCM9q9WDXR3LwMABQAmElVdLtendoputztJw/fVKgoAQVGM22y2jXaANpbdCIpi/PS5ihrivbwky4uEkCvdZkJpUpblWDk4clSDAgD6xlOSLMeuCiaEqJIkLZrK2PbZ8ZrriIlEVUmWY4TS5KVBWY4xkWjNAuregUwkqiqKMk8Z5r/g0y2tBzZEAQB946lQKDTDsmxLh4thmKSiKPO0AdgcBXAij2ZC4fBTu93+8iIgx3FroXB4Bn3jqWZ1Nb+g9WLf/8hn0ul4qVS6C2C4TonqcDhSkizPnz2ll0JPc5hanyto2tQ/sNrl9a55hh4vXXSellAAKH97O7W3vz8H0xwmhKg9PT1L3PUHa63M0TIKAOb3xNBeLvclKIo3SWii6ferlz+vAeEjv5G3sAAAAABJRU5ErkJggg=="}},i={};function t(a){var l=i[a];if(void 0!==l)return l.exports;var n=i[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}t.m=e,function(){var e=[];t.O=function(i,a,l,n){if(!a){var o=1/0;for(c=0;c<e.length;c++){a=e[c][0],l=e[c][1],n=e[c][2];for(var r=!0,d=0;d<a.length;d++)(!1&n||o>=n)&&Object.keys(t.O).every(function(e){return t.O[e](a[d])})?a.splice(d--,1):(r=!1,n<o&&(o=n));if(r){e.splice(c--,1);var s=l();void 0!==s&&(i=s)}}return i}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,l,n]}}(),function(){t.n=function(e){var i=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(i,{a:i}),i}}(),function(){t.d=function(e,i){for(var a in i)t.o(i,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:i[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){t.j=710}(),function(){t.p=""}(),function(){var e={710:0};t.O.j=function(i){return 0===e[i]};var i=function(i,a){var l,n,o=a[0],r=a[1],d=a[2],s=0;if(o.some(function(i){return 0!==e[i]})){for(l in r)t.o(r,l)&&(t.m[l]=r[l]);if(d)var c=d(t)}for(i&&i(a);s<o.length;s++)n=o[s],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(c)},a=self["webpackChunkwww"]=self["webpackChunkwww"]||[];a.forEach(i.bind(null,0)),a.push=i.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504,996],function(){return t(27212)});a=t.O(a)})();