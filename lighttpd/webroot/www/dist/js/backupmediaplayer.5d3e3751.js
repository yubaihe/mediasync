(function(){"use strict";var e={35328:function(e,t,i){var n=i(45130),a=i(56768),l=i(24232),o=i(90144),r=i(92820),d=i(59048),u=i(91844),s=(i(50635),i(24073)),c=i(89231),m=i(61221),h=i(94802);const v={key:0,claa:"mediaimage",style:{width:"100%",height:"100%"}},f={style:{width:"100%",height:"100%"}},y={key:1,claa:"mediavideo",style:{width:"100%",height:"100%"}},p={class:"info"},k={class:"mediaitem layout_flex canclick"},g=["innerHTML"],w={class:"mediaitem layout_flex"},b=["innerHTML"],x={key:0,class:"mediaitem chixushijian layout_flex"},T=["innerHTML"],L={class:"mediaitem layout_flex",ref:"fenbianlvconatiner"},S=["innerHTML"],C=["innerHTML"],O={key:0,class:"layout-right",style:{"margin-right":"3vh","margin-top":"1.8vh",width:"1.5vh",height:"2.5vh"}},E={class:"playaddrdetail",style:{position:"relative",width:"100%",height:"100%"}},I=["src"],_={style:{width:"100%",height:"10vh","text-align":"center","margin-top":"2vh"}};var j={__name:"BackupSwipeSlide",props:{item:{type:Object,required:!0,default:()=>({})},autoplayvideo:{type:Boolean,required:!0,default:!1},foldname:{type:String,required:!0,default:""}},emits:["deletemediaitem","videoerror"],setup(e,{expose:t,emit:n}){const j=e,M=(e,t)=>{R("videoerror",e,t)},z=()=>{R("deletemediaitem",j.item)},R=n,H=(0,o.KR)(null);(0,a.wB)(()=>j.autoplayvideo,(e,t)=>{1==j.autoplayvideo?P():N()});const N=()=>{2==j.item.mtype&&H.value.PauseVideo()},P=()=>{2==j.item.mtype&&H.value.PlayVideo()},J=e=>{0!=j.autoplayvideo&&H.value.PlayVideo()},G=e=>(0,c.Nx)(e,j.foldname),q=e=>(0,c.T5)(e,j.foldname),A=e=>(0,c.Nx)(e,j.foldname),X=e=>{if(0==U(e))return;let t={};t["id"]=e.itemid,t["weizhi"]=e.weizhi,t["location"]=e.location,d.f.device.gpsaddress(JSON.stringify(t))},F=e=>e.width+" X "+e.height,V=e=>(0,c.FM)(e.size),B=e=>e.createtime;let D=(0,c.CC)();const K=e=>{(0,s.us)(e.itemid,e.weizhi,e.location,(t,i,n)=>{e["location"]=(0,r.yk)(i),e["weizhi"]=(0,r.yk)(n)})},U=e=>e.location!=(0,r.yk)("未知")&&e.location!=(0,r.yk)("获取中..."),Q=(0,o.KR)(null),W=e=>{let t=Q.value.offsetWidth,i=Q.value.offsetHeight;if(e.width<t&&e.height<i)return e["containerheight"]=e.height+"px",void(e["containerwidth"]=e.width+"px");let n=1*t/e.width,a=1*i/e.height,l=n>a?a:n;0==l&&(l=n+a),e["containerheight"]=e.height*l+"px",e["containerwidth"]=e.width*l+"px"},Y=()=>2==j.item.mtype?H.value.GetErrorCode():0;return(0,a.dY)(()=>{K(j.item),W(j.item)}),t({InitItemWh:W,GetVideoErrorCode:Y}),(t,n)=>((0,a.uX)(),(0,a.CE)("div",{class:"BackUpSlideItem",ref_key:"mediaplayer",ref:Q},[(0,a.bF)((0,o.R1)(u.r),{options:{scrollbars:{autoHide:"scroll",visibility:"visible"}},class:"divmain",style:{width:"100%",height:"100%"}},{default:(0,a.k6)(()=>[(0,a.Lk)("div",{class:"media",style:(0,l.Tr)([{width:"100%",height:"100%"},{height:e.item.containerheight}])},[1==e.item.mtype?((0,a.uX)(),(0,a.CE)("div",v,[(0,a.Lk)("div",f,[(0,a.bF)(h.A,{src:A(e.item.file),imgwidth:e.item.containerwidth,imgheight:e.item.containerheight,style:{width:"100%",height:"100%","text-align":"center",display:"flex","justify-content":"center"}},null,8,["src","imgwidth","imgheight"])])])):((0,a.uX)(),(0,a.CE)("div",y,[(0,a.bF)(m.A,{ref_key:"videoPlayer",ref:H,src:G(e.item.file),poster:q(e.item.file),onCanPlayThrough:J,onPlayError:M,autoplay:e.autoplayvideo,tag:e.item,style:{width:"100%",height:"100%"}},null,8,["src","poster","autoplay","tag"])]))],4),(0,a.Lk)("div",p,[(0,a.Lk)("div",k,[n[2]||(n[2]=(0,a.Lk)("div",{class:"layout-left mediaitemtitle mediapaitimelabel"},"拍摄时间:",-1)),(0,a.Lk)("div",{class:"layout-middle paisheshijian",innerHTML:B(e.item)},null,8,g)]),(0,a.Lk)("div",w,[n[3]||(n[3]=(0,a.Lk)("div",{class:"layout-left mediaitemtitle mediasizelabel"},"媒体大小:",-1)),(0,a.Lk)("div",{class:"layout-middle mediaitemsize",innerHTML:V(e.item)},null,8,b)]),2==e.item.mtype?((0,a.uX)(),(0,a.CE)("div",x,[n[4]||(n[4]=(0,a.Lk)("div",{class:"layout-left mediaitemtitle mediadurationlabel"},"持续时间: ",-1)),(0,a.Lk)("div",{class:"layout-middle mediaitemdur",innerHTML:(0,o.R1)(c._D)(e.item.duration)},null,8,T)])):(0,a.Q3)("",!0),(0,a.Lk)("div",L,[n[5]||(n[5]=(0,a.Lk)("div",{class:"layout-left mediaitemtitle fenbianlvlabel"},"分辨率:",-1)),(0,a.Lk)("div",{class:"layout-middle fenbianlv",innerHTML:F(e.item)},null,8,S)],512),(0,o.R1)(D)?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,l.C4)(["mediaitem playaddr layout_flex",{canclick:1==U(e.item)}]),onClick:n[0]||(n[0]=t=>X(e.item))},[n[6]||(n[6]=(0,a.Lk)("div",{class:"layout-left mediaitemtitle mediapaiaddrlabel"},"拍摄地点:",-1)),(0,a.Lk)("div",{class:"layout-middle paishedidian",innerHTML:e.item.location},null,8,C),1==U(e.item)?((0,a.uX)(),(0,a.CE)("div",O,[(0,a.Lk)("div",E,[(0,a.Lk)("img",{style:{position:"absolute",width:"100%",height:"100%",scale:"fit"},src:i(52419)},null,8,I)])])):(0,a.Q3)("",!0)],2)):(0,a.Q3)("",!0),(0,a.Lk)("div",_,[(0,a.Lk)("div",{class:"mediaitemdel canclick mediaremovelabel",onClick:n[1]||(n[1]=t=>z(e.item)),style:{width:"20vh",height:"7vh","background-color":"#d9534f",border:"#d43f3a 1px solid",margin:"0 auto","border-radius":"4px",color:"white","font-size":"2.5vh","text-align":"center","line-height":"7vh"}}," 删 除 ")])])]),_:1})],512))}},M=i(71241);const z=(0,M.A)(j,[["__scopeId","data-v-68e12c7c"]]);var R=z,H=i(48319);const N={class:"BackupMeidaPlayerMain"},P=["src"];var J={__name:"App",setup(e){const t=(e,t)=>{u.value.BindInstance(e,t)},n=(e,t)=>{let i=u.value.GetCurItem();e.itemid==i.itemid&&window.ToastError((0,r.yk)("播放错误,错误码: ")+t)},u=(0,o.KR)(null),s=(0,o.KR)(!0),m=e=>{d.f.device.backupswitchitem(JSON.stringify(e)),u.value.EnumInstance(t=>{e.itemid==t.itemid?(t.autoplayvideo=!0,setTimeout(()=>{let t=u.value.GetInstance(e.itemid).GetVideoErrorCode();0!=t&&window.ToastError((0,r.yk)("播放错误,错误码: ")+t)},500)):t.autoplayvideo=!1}),setTimeout(()=>{x()},100)},h=()=>{s.value=!1,d.f.device.backupempty()},v=e=>{let t=Object.hasOwn(e,"cur");if(0==t)return void h();let i=Object.hasOwn(e,"prev"),n=Object.hasOwn(e,"next");e["cur"]["containerheight"]="0px",e["cur"]["containerwidth"]="0px",e["cur"]["paishedizhi"]=(0,r.yk)("获取中..."),e["cur"]["location"]=(0,r.yk)("获取中..."),1==i&&(e["prev"]["containerheight"]="0px",e["prev"]["containerwidth"]="0px",e["prev"]["paishedizhi"]=(0,r.yk)("获取中..."),e["prev"]["location"]=(0,r.yk)("获取中...")),1==n&&(e["next"]["containerheight"]="0px",e["next"]["containerwidth"]="0px",e["next"]["paishedizhi"]=(0,r.yk)("获取中..."),e["next"]["location"]=(0,r.yk)("获取中...")),u.value.AssembleItems(e)};let f=null,y=0;function p(){y=(new Date).getTime();let e=u.value.GetCurItem(),t={action:"synctodeviceprecent"};t["itemid"]=e.itemid,d.o.request.synctodeviceprecent(JSON.stringify(t),function(t,i,n){var a=JSON.parse(t);return y=0,1!=a["status"]?(null!=f&&(clearInterval(f),f=null),Toast((0,r.yk)("同步失败!")),void u.value.Enable()):100==a["precent"]?(null!=f&&(clearInterval(f),f=null),u.value.Enable(),"media exist"!=a["error"]&&d.f.device.backupfilesync(e.itemid+""),void Toast((0,r.yk)("同步成功!"))):void SetToast((0,r.yk)("正在同步:")+a["precent"]+"%")},function(e,t){y=0,UnSetToast(),Toast((0,r.yk)("同步失败!")),u.value.Enable()})}function k(){u.value.Disable(),ShowConfirm((0,r.yk)("确认"),(0,r.yk)("请确认是否需要同步到设备？"),1,(0,r.yk)("按钮确定"),function(){let e=u.value.GetCurItem(),t={action:"synctodevice"};t["itemid"]=e.itemid,d.o.request.synctodevice(JSON.stringify(t),function(e,t,i){var n=JSON.parse(e);if(1!=n["status"])return u.value.Enable(),void Toast((0,r.yk)("同步失败!"));null!=f&&(clearInterval(f),f=null),SetToast((0,r.yk)("正在同步:")+n["precent"]+"%"),f=setInterval(()=>{0!=y&&(new Date).getTime()-y<5e3||p()})},function(e,t){UnSetToast(),Toast((0,r.yk)("同步失败!")),u.value.Enable()})},(0,r.yk)("按钮取消"),function(){u.value.Enable(),UnSetToast()})}const g=e=>{u.value.Disable(),ShowConfirm((0,r.yk)("确认"),(0,r.yk)("删除后将永远丢失该媒体的存储,请确认!"),1,(0,r.yk)("按钮确定"),function(){let t={action:"backupuploaditemdel"};t["itemid"]=parseInt(e.itemid),d.o.request.backupuploaditemdel(JSON.stringify(t),function(t,i,n){u.value.Enable();var a=JSON.parse(t);1==a["status"]?(d.f.device.backupdeleteitem(e.itemid+""),u.value.RemoveCurSel()):Toast((0,r.yk)("系统错误!"))},function(e,t){u.value.Enable()})},(0,r.yk)("按钮取消"),function(){UnSetToast(),u.value.Enable()})};let w=0;const b=e=>{let t={action:"backupfolditemdetail"};t["itemid"]=e,d.o.request.diskitemdetail(JSON.stringify(t),function(e,t,i){w=0;var n=JSON.parse(e);v(n)},function(t,i){3!=w&&setTimeout(()=>{w++,b(e)},500)})},x=()=>{let e=u.value.GetCurItem();u.value.GetInstance(e.itemid).InitItemWh(e)};(0,a.xo)(()=>{window.removeEventListener("resize",x)});let T=(0,o.KR)("");return(0,a.sV)(()=>{window.addEventListener("resize",x),window.InitSwiper=(e,t)=>{T.value=t,b(e)}}),(0,a.dY)(()=>{(0,c.RA)()}),(e,r)=>((0,a.uX)(),(0,a.CE)("div",N,[(0,a.Lk)("div",{class:(0,l.C4)(["nodatadiv",{hidden:1==s.value}]),style:{position:"absolute","text-align":"center",width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[(0,a.Lk)("img",{src:i(10829),style:{width:"10vh",height:"10vh"}},null,8,P)],2),(0,a.bF)(H.A,{class:(0,l.C4)({hidden:0==s.value}),ref_key:"swipewraper",ref:u,style:{width:"100%",height:"100%",position:"relative"},onRequestItem:b,onItemSelect:m,onRemoveCurSel:g,onEmpty:h},{content:(0,a.k6)(({item:e})=>[(0,a.bF)(R,{style:{width:"100%",height:"100%"},item:e,autoplayvideo:e.autoplayvideo,foldname:(0,o.R1)(T),onDeletemediaitem:g,ref:i=>t(i,e.itemid),onVideoerror:n},null,8,["item","autoplayvideo","foldname"])]),_:1},8,["class"]),(0,a.Lk)("div",{class:(0,l.C4)(["ShowIgnorePage",{hidden:0==s.value}]),onClick:r[0]||(r[0]=e=>k())},null,2)]))}};const G=(0,M.A)(J,[["__scopeId","data-v-14347025"]]);var q=G;i(70523),i(17945),i(85044),i(83779),i(38220),i(95956),i(22280),i(1563),i(55668);(0,n.Ef)(q).mount("#app")}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var l=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(l.exports,l,l.exports,i),l.loaded=!0,l.exports}i.m=e,function(){var e=[];i.O=function(t,n,a,l){if(!n){var o=1/0;for(s=0;s<e.length;s++){n=e[s][0],a=e[s][1],l=e[s][2];for(var r=!0,d=0;d<n.length;d++)(!1&l||o>=l)&&Object.keys(i.O).every(function(e){return i.O[e](n[d])})?n.splice(d--,1):(r=!1,l<o&&(o=l));if(r){e.splice(s--,1);var u=a();void 0!==u&&(t=u)}}return t}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[n,a,l]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){i.j=828}(),function(){i.p=""}(),function(){var e={828:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,l,o=n[0],r=n[1],d=n[2],u=0;if(o.some(function(t){return 0!==e[t]})){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(d)var s=d(i)}for(t&&t(n);u<o.length;u++)l=o[u],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(s)},n=self["webpackChunkwww"]=self["webpackChunkwww"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504,996],function(){return i(35328)});n=i.O(n)})();