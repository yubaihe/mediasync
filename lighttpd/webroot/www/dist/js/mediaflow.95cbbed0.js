(function(){"use strict";var e={12164:function(e,t,i){var l=i(45130),n=(i(44114),i(18111),i(22489),i(33110),i(58335),i(56768)),s=i(24232),o=i(90144),a=i(88636),r=i(89231),u=i(59048),d=i(92820),c=i(65943);const h={class:"MediaFlowMain"},v=["src"],f=["onClick"],g={key:0,class:"itemselect",style:{width:"20px",height:"20px",position:"absolute",right:"0","margin-right":"5px"}},p=["src"],m=["src"],y=["src"],w={class:"picinfo",style:{width:"100%",height:"3vh","background-color":"#ffffff",position:"relative"}},k={key:0,class:"videoinfo",style:{width:"65%",height:"100%",position:"relative",display:"flex","align-items":"center"}},b={style:{width:"1.5vh",height:"1.5vh"}},x=["src"],L=["innerHTML"],S=["innerHTML"],O={key:1,class:"shikuang canclick",style:{position:"absolute",left:"0.5vh",top:"0.5vh",width:"3vh",height:"3vh","z-index":"2"}},C=["src"],J={key:2,class:"pinned",style:{position:"absolute",right:"0.5vh",top:"0.5vh",width:"3vh",height:"3vh","z-index":"2"}},T=["src"],H={key:0,class:"finishcontent",style:{width:"100%",height:"4vh"}},E={style:{"vertical-align":"middle","text-align":"center","padding-left":"10px","padding-right":"10px"}},M=["innerHTML"],N={style:{width:"30%",height:"100%",display:"flex","align-items":"center"}},j=["src"],z={style:{width:"40%",height:"100%",display:"flex","align-items":"center"}},R=["src"],G={style:{width:"30%",height:"100%",display:"flex","align-items":"center","justify-content":"flex-end"}},I=["src"],_=20;var K={__name:"App",setup(e){const t=()=>{let e="";for(let t=0;t<we.value.length;++t)1==we.value[t]["select"]&&(e+=we.value[t].id,e+="&");0!=e.length&&(e=e.substring(0,e.length-1),u.f.device.setitemsgroup(e))};let l=[],K=0,X=0;const Q=()=>{let e={};e["year"]=ne,e["month"]=se,e["day"]=oe,e["addr"]=ae,e["gid"]=re,e["piccount"]=X,e["videocount"]=K,u.f.device.removeitems(JSON.stringify(e))},q=()=>{l=[],K=0,X=0;for(let e=0;e<we.value.length;++e)1==we.value[e]["select"]&&l.push(we.value[e]);0!=l.length&&ShowConfirm((0,d.yk)("确认"),(0,d.yk)("删除后将永远丢失该媒体的存储,请确认!"),1,(0,d.yk)("按钮确定"),function(){SetToast((0,d.yk)("剩余:")+l.length),F()},(0,d.yk)("按钮取消"),function(){})},A=(0,n.EW)(()=>we.value.filter(e=>1==e.needshow)),F=()=>{if(0==l.length)return Toast((0,d.yk)("删除成功")),Q(),void U();let e=l.pop(),t={action:"delmediaitem"};t["id"]=e.id;let i=e.mtype;u.o.request.delmediaitem(JSON.stringify(t),function(n,s,o){var a=JSON.parse(n);1==a["status"]?(1==i?X++:K++,SetToast((0,d.yk)("剩余:")+l.length),window.HideItem(e.id),F()):(Toast((0,d.yk)("删除失败")),console.log(JSON.stringify(t)),console.log(n),Q())},function(e,t){Toast((0,d.yk)("删除失败")),Q()})},P=()=>{let e=0;for(let t=0;t<we.value.length;++t)1==we.value[t].needshow&&e++;return(0,d.yk)("总数量")+"( "+e+" )"},B=(0,o.KR)(null),D=()=>{W.value=!0},W=(0,o.KR)(!1),U=()=>{W.value=!1;for(let e=0;e<we.value.length;++e)we.value[e]["select"]=!1;B.value.LeaveSelectMode()},V=e=>{1==W.value?e["select"]=!e["select"]:u.f.device.itemdetail(e.id+"")},Y=e=>(0,r.I)(e.maddr),Z=e=>(0,r._D)(e.dur),$=e=>(0,r.yi)(e.msize),ee=(0,o.KR)(0),te=e=>{var t=ee.value/3;let i=t/e.w*1*e.h;return i+"px"},ie=(0,c.A)(()=>{ee.value=B.value.GetWidth()},400);window.addEventListener("resize",ie);let le="recent",ne=0,se=0,oe=0,ae="",re=0;const ue=()=>{le=(0,r.JG)("type"),null==le&&(le="recent"),ne=(0,r.JG)("year"),ne=null==ne?0:parseInt(ne),se=(0,r.JG)("month"),se=null==se?0:parseInt(se),oe=(0,r.JG)("day"),oe=null==oe?0:parseInt(oe),ae=decodeURI((0,r.JG)("addr")),"null"==ae&&(ae=""),re=(0,r.JG)("gid"),re=null==re?0:parseInt(re)},de=(e,t)=>{const i=t.elements().viewport;let l=i.clientHeight,n=i.scrollTop;const s=i.scrollHeight-i.clientHeight;1!=me.value?s-n<l/3&&0==pe.value&&be():he()},ce=(0,o.KR)(!1),he=()=>{const e=B.value.GetScrollBar().elements().viewport;return e.clientHeight<e.scrollHeight?(ce.value=!0,!0):(ce.value=!1,!1)},ve=(0,o.KR)(!0),fe=()=>{if(he(),0==me.value){const e=B.value.GetScrollBar().elements().viewport;if(e.clientHeight==e.scrollHeight)return void be()}else 1==me.value&&(ve.value=1!=ge())},ge=()=>{let e=!0;for(let t=0;t<we.value.length;++t)if(1==we.value[t]["needshow"]){e=!1;break}return 1==e?1==ve.value&&(ve.value=!1,W.value=!1,u.f.device.dataempty()):0==ve.value&&(ve.value=!0),e},pe=(0,o.KR)(!1),me=(0,o.KR)(!1),ye=()=>{let e=0;for(let t=0;t<we.value.length;++t)1==we.value[t]["needshow"]&&e++;return e},we=(0,o.KR)([]),ke=e=>{if(0!=e.length){for(let t=0;t<e.length;++t){let i={};i["dur"]=e[t]["dur"],i["h"]=e[t]["h"],i["w"]=e[t]["w"],i["hasextra"]=e[t]["hasextra"],i["id"]=e[t]["id"],i["maddr"]=e[t]["maddr"],i["msize"]=e[t]["msize"],i["mtype"]=e[t]["mtype"],i["pinnedtime"]=e[t]["pinnedtime"],i["needshow"]=!0,i["select"]=!1,we.value.push(i)}pe.value=!1}else pe.value=!1},be=()=>{if(pe.value=!0,"recent"==le){let e={action:"recentupload"};e["start"]=ye(),e["limit"]=_,e["devnames"]=(0,r.sL)(),u.o.request.recentupload(JSON.stringify(e),function(e,t,i){let l=JSON.parse(e);1==l["status"]&&0==l["items"].length&&(pe.value=!1,me.value=!0,ge(),he()),0!=l["status"]?ke(l["items"]):pe.value=!1},function(e,t){pe.value=!1})}else if("favorite"==le){let e={action:"favorite"};e["start"]=ye(),e["limit"]=_,e["devnames"]=(0,r.sL)(),u.o.request.favorite(JSON.stringify(e),function(e,t,i){let l=JSON.parse(e);1==l["status"]&&0==l["items"].length&&(pe.value=!1,me.value=!0,ge(),he()),0!=l["status"]?ke(l["items"]):pe.value=!1},function(e,t){pe.value=!1})}else if("group"==le){let e={action:"groupitemlist"};e["start"]=ye(),e["limit"]=_,e["gid"]=re,e["devnames"]=(0,r.sL)(),u.o.request.groupitemlist(JSON.stringify(e),function(e,t,i){let l=JSON.parse(e);1==l["status"]&&0==l["items"].length&&(pe.value=!1,me.value=!0,ge(),he()),0!=l["status"]?ke(l["items"]):pe.value=!1},function(e,t){pe.value=!1})}else{if("location"!=le){let e={action:"yearitemlist"};return e["year"]=ne,e["start"]=ye(),e["limit"]=_,e["devnames"]=(0,r.sL)(),e["location"]=ae,e["month"]=se,e["day"]=oe,void u.o.request.yearitemlist(JSON.stringify(e),function(e,t,i){let l=JSON.parse(e);1==l["status"]&&0==l["items"].length&&(pe.value=!1,me.value=!0,ge(),he()),0!=l["status"]?ke(l["items"]):pe.value=!1},function(e,t){pe.value=!1})}{let e={action:"locationitemlist"};e["year"]=ne,e["start"]=ye(),e["limit"]=_,e["devnames"]=(0,r.sL)(),e["location"]=ae,e["month"]=se,e["day"]=oe,e["devnames"]=(0,r.sL)(),u.o.request.locationitemlist(JSON.stringify(e),function(e,t,i){let l=JSON.parse(e);1==l["status"]&&0==l["items"].length&&(pe.value=!1,me.value=!0,ge(),he()),0!=l["status"]?ke(l["items"]):pe.value=!1},function(e,t){pe.value=!1})}}};return(0,n.sV)(()=>{window.EnterSelectMode=()=>{W.value=!0},window.DisableSelectMode=()=>{W.value=!1},window.ShowItem=e=>{for(let t=0;t<we.value.length;++t)if(we.value[t]["id"]==e){we.value[t]["needshow"]=!0;break}ge(),he()},window.HideItem=e=>{for(let t=0;t<we.value.length;++t)if(we.value[t]["id"]==e){we.value[t]["needshow"]=!1;break}ge(),he()}}),(0,n.dY)(()=>{(0,r.RA)(),ie(),ue(),be()}),(e,l)=>((0,n.uX)(),(0,n.CE)("div",h,[(0,n.Lk)("div",{class:(0,s.C4)(["nodatadiv",{hidden:1==ve.value}]),style:{position:"absolute","text-align":"center",width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[(0,n.Lk)("img",{src:i(10829),style:{width:"10vh",height:"10vh"}},null,8,v)],2),(0,n.Lk)("div",{class:(0,s.C4)({hidden:0==ve.value}),style:{width:"100%",height:"100%",position:"relative"}},[(0,n.bF)(a.A,{ref_key:"mediaflow",ref:B,style:{width:"100%",height:"100%"},flowdata:A.value,onEnterselectmode:D,onHandlescroll:de,onLayoutend:fe},{content:(0,n.k6)(({item:e})=>[(0,n.Lk)("div",{class:(0,s.C4)(["grid-itemmedia grid-item canclick",{hidden:0==e.needshow}]),style:{position:"relative",padding:"0.3vh",overflow:"hidden","box-sizing":"border-box"},onClick:t=>V(e)},[1==W.value?((0,n.uX)(),(0,n.CE)("div",g,[1==e.select?((0,n.uX)(),(0,n.CE)("img",{key:0,class:"itemselectpic",src:i(81120),style:{width:"100%",height:"100%"}},null,8,p)):(0,n.Q3)("",!0),0==e.select?((0,n.uX)(),(0,n.CE)("img",{key:1,class:"itemselectpic",src:i(48463),style:{width:"100%",height:"100%"}},null,8,m)):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:"imgdiv",style:(0,s.Tr)([{width:"100%",height:"300px"},{height:te(e)}])},[(0,n.Lk)("img",{class:"mediapic",style:{width:"100%",height:"100%"},src:Y(e)},null,8,y)],4),(0,n.Lk)("div",w,[2==e.mtype?((0,n.uX)(),(0,n.CE)("div",k,[(0,n.Lk)("div",b,[(0,n.Lk)("img",{style:{position:"absolute",width:"1.5vh",height:"1.5vh"},src:i(12623)},null,8,x)]),(0,n.Lk)("div",{class:"videoduration",style:{"margin-left":"0.5vh","font-size":"1rem",color:"#6F87A8"},innerHTML:Z(e)},null,8,L)])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:"filesize",style:{position:"absolute",right:"0",top:"0",width:"35%",height:"100%","font-size":"1rem","line-height":"3vh",color:"#6F87A8","text-align":"right"},innerHTML:$(e)},null,8,S)]),0!=e.hasextra?((0,n.uX)(),(0,n.CE)("div",O,[(0,n.Lk)("img",{src:i(87426),width:"100%",height:"100%"},null,8,C)])):(0,n.Q3)("",!0),void 0!==e.pinnedtime&&0!=e.pinnedtime&&0==W.value?((0,n.uX)(),(0,n.CE)("div",J,[(0,n.Lk)("img",{src:i(46734),width:"100%",height:"100%",style:{opacity:"0.8",filter:"drop-shadow(2px 2px 4px rgba(0,0,0,0.3)) drop-shadow(-2px -2px 4px rgba(255,255,255,0.5))"}},null,8,T)])):(0,n.Q3)("",!0)],10,f)]),foot:(0,n.k6)(()=>[1==ce.value?((0,n.uX)(),(0,n.CE)("div",H,[(0,n.Lk)("div",E,[l[3]||(l[3]=(0,n.Lk)("div",{style:{background:"linear-gradient(to left,#efefef, #ddd,#efefef)",height:"1px"}},null,-1)),(0,n.Lk)("div",{class:"finishcontenttongji",style:{color:"#ccc"},innerHTML:P()},null,8,M)])])):(0,n.Q3)("",!0)]),_:1},8,["flowdata"])],2),(0,n.Lk)("div",{class:(0,s.C4)(["selectbottom",{hidden:0==W.value}]),style:{"background-color":"rgba(255, 255, 255, 0.9)",width:"100%",height:"7vh",bottom:"0",position:"fixed","box-shadow":"0 -5px 15px  #d0d2d3",display:"flex"}},[(0,n.Lk)("div",N,[(0,n.Lk)("div",{onClick:l[0]||(l[0]=e=>U()),style:{display:"block",width:"5vh",height:"4vh",cursor:"pointer"}},[(0,n.Lk)("img",{src:i(87806),width:"100%",height:"100%"},null,8,j)])]),(0,n.Lk)("div",z,[(0,n.Lk)("div",{onClick:l[1]||(l[1]=e=>q()),style:{display:"block",width:"3.4vh",height:"4vh",margin:"0 auto",cursor:"pointer"}},[(0,n.Lk)("img",{src:i(17180),width:"100%",height:"100%"},null,8,R)])]),(0,n.Lk)("div",G,[(0,n.Lk)("div",{onClick:l[2]||(l[2]=e=>t()),style:{display:"block",width:"3.4vh",height:"4vh","margin-right":"1vh",cursor:"pointer"}},[(0,n.Lk)("img",{src:i(12727),width:"100%",height:"100%"},null,8,I)])])],2)]))}};const X=K;var Q=X;i(70523),i(17945),i(85044),i(83779),i(38220),i(95956),i(22280),i(1563),i(55668);const q=(0,l.Ef)(Q);q.mount("#app")},12727:function(e,t,i){e.exports=i.p+"img/group.91a01b6f.png"}},t={};function i(l){var n=t[l];if(void 0!==n)return n.exports;var s=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=e,function(){var e=[];i.O=function(t,l,n,s){if(!l){var o=1/0;for(d=0;d<e.length;d++){l=e[d][0],n=e[d][1],s=e[d][2];for(var a=!0,r=0;r<l.length;r++)(!1&s||o>=s)&&Object.keys(i.O).every(function(e){return i.O[e](l[r])})?l.splice(r--,1):(a=!1,s<o&&(o=s));if(a){e.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[l,n,s]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var l in t)i.o(t,l)&&!i.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){i.j=357}(),function(){i.p=""}(),function(){var e={357:0};i.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,s,o=l[0],a=l[1],r=l[2],u=0;if(o.some(function(t){return 0!==e[t]})){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(r)var d=r(i)}for(t&&t(l);u<o.length;u++)s=o[u],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(d)},l=self["webpackChunkwww"]=self["webpackChunkwww"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=i.O(void 0,[504,996],function(){return i(12164)});l=i.O(l)})();