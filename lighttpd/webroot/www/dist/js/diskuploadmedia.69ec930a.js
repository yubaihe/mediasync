(function(){"use strict";var e={23982:function(e,t,i){var n=i(45130),l=(i(44114),i(33110),i(58335),i(56768)),s=i(90144),o=i(24232),r=i(91844),a=(i(50635),i(59048)),u=i(92820),c=i(89231);const d={class:"DiskUploadMediaMain",style:{display:"flex","flex-direction":"column"}},v={class:"UploadTips",style:{"background-color":"#FFC66A",height:"5vh","line-height":"5vh"}},f=["innerHTML"],p=["innerHTML"],h=["innerHTML"],g={style:{position:"relative",width:"100%",height:"13vh","padding-left":"1vh","padding-top":"1vh"}},y={class:"thumbimgbg",style:{position:"absolute",width:"10vh",height:"10vh","background-color":"#FFFFFF"}},m=["src","onError"],k={key:0,class:"videotag",style:{position:"absolute",left:"0.1vh",top:"7vh",width:"2.3vh",height:"2.3vh"}},w=["src"],b={style:{float:"right",width:"10vh",height:"10vh","margin-right":"1vh","line-height":"10vh","text-align":"center"}},x={key:0,class:"wait",style:{"font-size":"5vh",color:"#CDB38B","text-shadow":"1px 1px 1px #CDB5CD"}},L={key:1,class:"uploading",style:{"font-size":"4vh",color:"#9C9C9C","text-shadow":"1px 1px 1px #5C5C5C"}},T={key:2,class:"uploadsuccess",style:{"font-size":"4vh",color:"#00B459","text-shadow":"1px 1px 1px #6CA6CD"}},C={key:3,class:"uploadfailed",style:{"font-size":"4vh",color:"#EE4000","text-shadow":"1px 1px 1px #EE9572"}},O={class:"mediainfo",style:{"margin-left":"11vh",height:"9vh","font-size":"2vh"}},M=["innerHTML"],E=["innerHTML"],S=["innerHTML"];var _={__name:"App",setup(e){const t=(0,s.KR)(null),n=(0,s.KR)([]),_={success:0,failed:0,total:0},H=(0,s.KR)((0,u.yk)("成功数")+":0"),F=(0,s.KR)((0,u.yk)("失败数")+":0"),j=(0,s.KR)((0,u.yk)("剩余数")+":0");let z="";const D=e=>(0,u.yk)("拍摄时间:")+e.paitime,I=e=>0==e.pic.length?i(41964):(0,c.y3)(e.id,z),R=e=>2==e.mtype?(0,u.yk)("视频时长:")+e.dur:"",X=e=>(0,u.yk)("媒体大小:")+e.filesize,B=e=>{e.pic=""},J=(e,t,i)=>{_.success=e,_.failed=t,_.total=i,H.value=(0,u.yk)("成功数")+":"+_.success,F.value=(0,u.yk)("失败数")+":"+_.failed,j.value=(0,u.yk)("剩余数")+":"+(i-_.failed-_.success)},K=()=>{let e={action:"diskuploaditemlist"};e["dev"]=z,e["start"]=n.value.length,e["limit"]=20,a.o.request.diskuploaditemlist(JSON.stringify(e),function(e,t,i){var l=JSON.parse(e),s=l["items"];if(0!=s.length){for(var o=0;o<s.length;++o){s[o].status="n",s[o].precent=0;let e={};e["dur"]=s[o].dur,e["filesize"]=s[o].filesize,e["id"]=s[o].id,e["mtype"]=s[o].mtype,e["paitime"]=s[o].paitime,e["pic"]=s[o].pic,e["status"]="n",e["precent"]=0,n.value.push(e)}J(0,0,n.value.length),K()}else a.f.device.loadfinish()},function(e,t){})},N=()=>{for(let e=0;e<n.value.length;++e)n.value[e].status="n",n.value[e].precent=0;J(0,0,n.value.length),W()},Q=()=>{if(1==A)return A=!1,null!=U&&(clearInterval(U),U=null),void a.f.device.diskuploadstop();let e=_.success+_.failed;if(e==n.value.length)return null!=U&&(clearInterval(U),U=null),void a.f.device.diskuploadfinish(_.failed+"");P(e);let t={action:"diskitemupload"};t["dev"]=z,t["itemid"]=n.value[e].id,q=(new Date).getTime(),a.o.request.diskitemupload(JSON.stringify(t),function(e,t,i){q=0;var n=JSON.parse(e);if(1!=n["status"]){return}})};let U=null,q=0,A=!1;(0,l.sV)(()=>{window.Init=e=>{z=e,K()},window.Stop=()=>{A=!0},window.Start=e=>{null==U&&(1==e&&N(),Q(),U=setInterval(()=>{if(0!=q&&(new Date).getTime()-q<5e3)return;let e={action:"diskitemuploadprecent"};e["dev"]=z,q=(new Date).getTime(),a.o.request.diskitemuploadprecent(JSON.stringify(e),function(e,t,i){q=0;var l=JSON.parse(e);if(1!=l["status"])return;let s=l["error"],o=l["precent"];if(0!=s.length){let e=_.success+_.failed;return n.value[e].status="f",_.failed++,J(_.success,_.failed,n.value.length),void Q()}if(100==o&&0==s.length){let e=_.success+_.failed;return a.f.device.diskuploaditemsuccess(n.value[e].id+""),n.value[e].status="s",_.success++,J(_.success,_.failed,n.value.length),void Q()}if(0==s.length){let e=_.success+_.failed;return void(0==o?(n.value[e].status="w",n.value[e].precent=0):100!=o&&(n.value[e].status="p",n.value[e].precent=o))}})},500))}}),(0,l.dY)(()=>{(0,u.hC)()});const P=e=>{e+=1;const i=t.value.osInstance(),n=t.value.$el.querySelector(".divitem:nth-child("+e+")"),l=i.elements().viewport,s=n.getBoundingClientRect(),o=l.getBoundingClientRect();let r=s.bottom-o.top+l.scrollTop-o.height;r<0&&(r=0),l.scrollTo({top:r,behavior:"smooth"})},W=()=>{const e=t.value.osInstance(),i=e.elements().viewport;i.scrollTo({top:0})};return(e,a)=>((0,l.uX)(),(0,l.CE)("div",d,[(0,l.Lk)("div",v,[(0,l.Lk)("span",{class:"UploadTips_success",style:{color:"#00B459","margin-left":"1vh"},innerHTML:H.value},null,8,f),a[0]||(a[0]=(0,l.eW)()),(0,l.Lk)("span",{class:"UploadTips_failed",style:{color:"#ff0000"},innerHTML:F.value},null,8,p),a[1]||(a[1]=(0,l.eW)()),(0,l.Lk)("span",{class:"UploadTips_left",innerHTML:j.value},null,8,h)]),(0,l.bF)((0,s.R1)(r.r),{ref_key:"divmain",ref:t,options:{scrollbars:{autoHide:"scroll",visibility:"visible"}},style:{width:"100%","flex-grow":"1"}},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.value,e=>((0,l.uX)(),(0,l.CE)("div",{class:"divitem",key:e.id},[(0,l.Lk)("div",g,[(0,l.Lk)("div",y,[(0,l.Lk)("img",{class:"thumbimg",src:I(e),width:"100%",height:"100%",onError:t=>B(e)},null,40,m),2==e.mtype?((0,l.uX)(),(0,l.CE)("div",k,[(0,l.Lk)("img",{src:i(12623),width:"100%",height:"100%"},null,8,w)])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",b,["w"==e.status?((0,l.uX)(),(0,l.CE)("div",x,"W")):(0,l.Q3)("",!0),"p"==e.status?((0,l.uX)(),(0,l.CE)("div",L,(0,o.v_)(e.precent)+"%",1)):(0,l.Q3)("",!0),"s"==e.status?((0,l.uX)(),(0,l.CE)("div",T,"S")):(0,l.Q3)("",!0),"f"==e.status?((0,l.uX)(),(0,l.CE)("div",C,"F")):(0,l.Q3)("",!0)]),(0,l.Lk)("div",O,[(0,l.Lk)("div",{style:{"margin-top":"1vh",height:"3vh"},innerHTML:R(e)},null,8,M),(0,l.Lk)("div",{style:{"margin-top":"0.2vh"},innerHTML:X(e)},null,8,E),(0,l.Lk)("div",{style:{"margin-top":"0.3vh"},innerHTML:D(e)},null,8,S)]),a[2]||(a[2]=(0,l.Lk)("div",{style:{height:"1px","background-color":"#e9e8e8","margin-top":"1vh"}},null,-1))])]))),128))]),_:1},512)]))}},H=i(71241);const F=(0,H.A)(_,[["__scopeId","data-v-737c2052"]]);var j=F;i(70523),i(17945),i(85044),i(83779),i(38220),i(95956),i(22280),i(1563),i(55668);(0,n.Ef)(j).mount("#app")}},t={};function i(n){var l=t[n];if(void 0!==l)return l.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=e,function(){var e=[];i.O=function(t,n,l,s){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],l=e[c][1],s=e[c][2];for(var r=!0,a=0;a<n.length;a++)(!1&s||o>=s)&&Object.keys(i.O).every(function(e){return i.O[e](n[a])})?n.splice(a--,1):(r=!1,s<o&&(o=s));if(r){e.splice(c--,1);var u=l();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,l,s]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){i.j=521}(),function(){i.p=""}(),function(){var e={521:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,s,o=n[0],r=n[1],a=n[2],u=0;if(o.some(function(t){return 0!==e[t]})){for(l in r)i.o(r,l)&&(i.m[l]=r[l]);if(a)var c=a(i)}for(t&&t(n);u<o.length;u++)s=o[u],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(c)},n=self["webpackChunkwww"]=self["webpackChunkwww"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504,996],function(){return i(23982)});n=i.O(n)})();